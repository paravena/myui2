/* myui, version 1.0 
 * 
 * Dual licensed under the MIT and GPL licenses. 
 * 
 * Copyright 2015-09-07 Pablo Aravena, all rights reserved. 
 * http://pabloaravena.info 
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy 
 * of this software and associated documentation files (the "Software"), to deal 
 * in the Software without restriction, including without limitation the rights 
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell 
 * copies of the Software, and to permit persons to whom the Software is 
 * furnished to do so, subject to the following conditions: 
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software. 
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN 
 * THE SOFTWARE. 
 */
!function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return(p=Array.prototype).indexOf||(p.indexOf=function(a){var b,c,d,e;for(b=d=0,e=this.length;e>d;b=++d)if(c=this[b],c===a)return b;return-1}),(q=String.prototype).trim||(q.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),h={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45},k={floorToInterval:function(a,b){return Math.floor(a/b)*b}},l={toPaddedString:function(a,b,c){var d,e,f;return e=a.toString(c||10),f=b-e.length,function(){var a,b;for(b=[],d=a=0;f>=0?f>a:a>f;d=f>=0?++a:--a)b.push("0");return b}().join("")+e}},e={unique:function(a){var b,c,d,e,f,g;for(c={},e=0,f=a.length;f>e;e++)b=a[e],c[b]=b;g=[];for(b in c)d=c[b],g.push(d);return g}},g={isAndroid:function(){return navigator.userAgent.match(/Android/i)},isBlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},isIOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},isOpera:function(){return navigator.userAgent.match(/Opera Mini/i)},isWindows:function(){return navigator.userAgent.match(/IEMobile/i)},isMobile:function(){return g.isAndroid()||g.isBlackBerry()||g.isIOS()||g.isOpera()||g.isWindows()}},d=864e5,b=0,c=function(a){return a>=0&&9>=a&&(a="0"+a),a},j=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],-1==="1234567890".indexOf(b))return!1;return!0},i=function(a,b,c,d){var e,f;for(f=d;f>=c;){if(e=a.substring(b,b+f),e.length<c)return null;if(j(e))return e;f--}return null},m=function(a,b){var c,d,e,f,g;for(d=a.length,e=[],c=f=b;d>=b?d>f:f>d;c=d>=b?++f:--f)e.push(a[c]);for(c=g=0;b>=0?b>g:g>b;c=b>=0?++g:--g)e.push(a[c]);return e},n=function(a,b){var c;for(c in b)a=a.replace(new RegExp("{"+c+"}","g"),b[c]);return a},f={getAmPmHour:function(a){var b;return b=a.getHours(),0===b?12:b>12?b-12:b},getAmPm:function(a){return a.getHours()<12?"AM":"PM"},stripTime:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},daysDistance:function(a,b){return Math.round((b-a)/d)},getDifference:function(a,b){return a.getTime()-b.getTime()},getUTCTime:function(a){return Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())},getTimeSince:function(a,b){return a.getUTCTime()-b.getUTCTime()},isValid:function(b,c){return null!==a.parseString(b,c)},isBefore:function(a,b){return null===b?!1:a.getTime()<b.getTime()},isAfter:function(a,b){return null===b?!1:a.getTime()>b.getTime()},equals:function(a,b){return null===b?!1:a.getTime()===b.getTime()},isDate:function(a){return null!==a&&!isNaN(a)&&"undefined"!=typeof a.getDate},equalsIgnoreTime:function(b,c){var d,e;return null===c?!1:(d=a.clearTime(new Date(b.getTime())),e=a.clearTime(new Date(c.getTime())),d.getTime()===e.getTime())},getDayName:function(a){return this.getDayNames()[a.getDay()]},getDayAbbreviation:function(a){return this.getDayAbbreviations()[a.getDay()]},getMonthName:function(a){return this.getMonthNames()[a.getMonth()]},getMonthAbbreviation:function(a){return this.getMonthAbbreviations()[a.getMonth()]},clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},parseString:function(b,c){var d,e,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;if("undefined"==typeof c||null===c||""===c){for(n=["y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM"],u=["M/d/y","M-d-y","M.d.y","M/d","M-d"],h=["d/M/y","d-M-y","d.M.y","d/M","d-M"],g=[n,u,h],C=0,G=g.length;G>C;C++)for(m=g[C],D=0,H=m.length;H>D;D++)if(l=m[D],k=a.parseString(b,l),null!==k)return k;return null}for(b+="",c+="",r=0,q=0,e="",y="",B=(new Date).getFullYear(),t=1,f=1,o=0,s=0,x=0,d="",z=0,A=0;q<c.length;){for(e=c.charAt(q),y="";c.charAt(q)===e&&q<c.length;)y+=c.charAt(q++);if("yyyy"===y||"yy"===y||"y"===y){if("yyyy"===y&&(z=4,A=4),"yy"===y&&(z=2,A=2),"y"===y&&(z=2,A=4),B=i(b,r,z,A),null===B)return null;r+=B.length,2===B.length&&(B=B>70?1900+(B-0):2e3+(B-0))}else if("MMM"===y||"NNN"===y){for(t=0,w=this.getMonthAbbreviations(),(y="MMM")&&(w=this.getMonthNames().concat(this.getMonthAbbreviations())),p=E=0,I=w.length;I>E;p=++E)if(v=w[p],b.substring(r,r+v.length).toLowerCase()===v.toLowerCase()){t=p%12+1,r+=v.length;break}if(1>t||t>12)return null}else if("EE"===y||"E"===y){for(w=this.getDayAbbreviations(),"EE"===y&&(w=this.getDayNames()),F=0,J=w.length;J>F;F++)if(j=w[F],b.substring(r,r+j.length).toLowerCase()===j.toLowerCase()){r+=j.length;break}}else if("MM"===y||"M"===y){if(t=i(b,r,y.length,2),null===t||1>t||t>12)return null;r+=t.length}else if("dd"===y||"d"===y){if(f=i(b,r,y.length,2),null===f||1>f||f>31)return null;r+=f.length}else if("hh"===y||"h"===y){if(o=i(b,r,y.length,2),null===o||1>o||o>12)return null;r+=o.length}else if("HH"===y||"H"===y){if(o=i(b,r,y.length,2),null===o||0>o||o>23)return null;r+=o.length}else if("KK"===y||"K"===y){if(o=i(b,r,y.length,2),null===o||0>o||o>11)return null;r+=o.length,o++}else if("kk"===y||"k"===y){if(o=i(b,r,y.length,2),null===o||1>o||o>24)return null;r+=o.length,o--}else if("mm"===y||"m"===y){if(s=i(b,r,y.length,2),null===s||0>s||s>59)return null;r+=s.length}else if("ss"===y||"s"===y){if(x=i(b,r,y.length,2),null===x||0>x||x>59)return null;r+=x.length}else if("a"===y){if("am"===b.substring(r,r+2).toLowerCase())d="AM";else{if("pm"!==b.substring(r,r+2).toLowerCase())return null;d="PM"}r+=2}else{if(b.substring(r,r+y.length)!==y)return null;r+=y.length}}if(r!==b.length)return null;if(2===t)if(B%4===0&&B%100!==0||B%400===0){if(f>29)return null}else if(f>28)return null;return(4===t||6===t||9===t||11===t)&&f>30?null:(12>o&&"PM"===d?o=o-0+12:o>11&&"AM"===d&&(o-=12),new Date(B,t-1,f,o,s,x))},format:function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o;for(b+="",k="",i=0,g="",m="",o=a.getYear()+"",f=a.getMonth()+1,h=a.getDate(),d=a.getDay(),e=a.getHours(),j=a.getMinutes(),l=a.getSeconds(),n={},o.length<4&&(o=""+(+o+1900)),n.y=""+o,n.yyyy=o,n.yy=o.substring(2,4),n.M=f,n.MM=c(f),n.MMM=this.getMonthNames()[f-1],n.NNN=this.getMonthAbbreviations()[f-1],n.d=h,n.dd=c(h),n.E=this.getDayAbbreviations()[d],n.EE=this.getDayNames()[d],n.H=e,n.HH=c(e),0===e?n.h=12:e>12?n.h=e-12:n.h=e,n.hh=c(n.h),n.K=n.h-1,n.k=n.H+1,n.KK=c(n.K),n.kk=c(n.k),e>11?n.a="PM":n.a="AM",n.m=j,n.mm=c(j),n.s=l,n.ss=c(l);i<b.length;){for(g=b.charAt(i),m="";b.charAt(i)===g&&i<b.length;)m+=b.charAt(i++);k+="undefined"!=typeof n[m]?n[m]:m}return k},add:function(a,b,c){var d;if("undefined"==typeof b||null===b||"undefined"==typeof c||null===c)return a;if(c=+c,"y"===b)a.setFullYear(a.getFullYear()+c);else if("M"===b)a.setMonth(a.getMonth()+c);else if("d"===b)a.setDate(a.getDate()+c);else if("w"===b)for(d=c>0?1:-1;0!==c;){for(a.add("d",d);0===a.getDay()||6===a.getDay();)a.add("d",d);c-=d}else"h"===b?a.setHours(a.getHours()+c):"m"===b?a.setMinutes(a.getMinutes()+c):"s"===b&&a.setSeconds(a.getSeconds()+c);return a},getWeek:function(a){var b,c,d;return d=new Date(a.valueOf()),b=(a.getDay()+6)%7,d.setDate(d.getDate()-b+3),c=d.valueOf(),d.setMonth(0,1),4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7),1+Math.ceil((c-d)/6048e5)},getWeekDays:function(){var a;return a=i18n.getMessage("date.weekDays"),b>0&&(a=m(a,b)),a},getMonthNames:function(){return i18n.getMessage("date.monthNames")},getMonthAbbreviations:function(){return i18n.getMessage("date.monthAbbreviations")},getDayNames:function(){return i18n.getMessage("date.dayNames")},getDayAbbreviations:function(){return i18n.getMessage("date.dayAbbreviations")},getFirstDayOfWeek:function(){return b},setFirstDayOfWeek:function(a){return a>1&&(a=1),b=a}},o={math:k,date:f,event:h,number:l,template:n,array:e,device:g},a.util=o}(jQuery);var i18n;i18n={EN:{"label.ok":"OK","label.now":"Now","label.today":"Today","label.week":"Week","label.clear":"Clear","label.add":"Add","label.delete":"Delete","label.save":"Save","label.sortAsc":"Sort ascending","label.sortDesc":"Sort descending","label.selectAll":"Select all","label.loading":"Loading ...","label.actions":"Actions","label.first":"First","label.last":"Last","message.totalDisplay":'<strong><span id="mtgTotal">#{total}</span></strong> records found',"message.rowsDisplay":', displaying <strong><span id="mtgFrom">#{from}</span></strong>&nbsp;to&nbsp;<strong><span id="mtgTo">#{to}</span></strong>',"message.pagePrompt":"<td><strong>Page:</strong></td><td>#{input}</td><td>of&nbsp;<strong>#{pages}</strong></td>","message.noRecordFound":"<strong>No records found</strong>","error.required.field":"#{field} is required","error.invalid.creditCard":"value #{value} is not a valid credit card number","error.invalid.range":"value #{value} does not fall within the valid range from #{from} to #{to}","error.invalid.size":"value #{value} does not fall within the valid size range from #{from} to #{to}","error.invalid.max":"value #{value} exceeds maximum value #{max}","error.invalid.min":"value #{value} is less than minimum value #{min}","error.invalid.max.size":"value #{value} exceeds the maximum size of #{max}","error.invalid.min.size":"value #{value} is less than the minimum size of #{min}","date.monthAbbreviations":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"date.monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"date.dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"date.dayAbbreviations":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"date.weekDays":["Su","Mo","Tu","We","Th","Fr","Sa"]},ES:{"label.ok":"OK","label.now":"Ahora","label.today":"Hoy","label.week":"Sem","label.clear":"Limpiar","label.add":"Agregar","label.delete":"Eliminar","label.save":"Grabar","label.sortAsc":"Ordenar asc","label.sortDesc":"Ordenar desc","label.selectAll":"Seleccionar todo","label.loading":"Espere ...","label.actions":"Acciones","label.first":"Primera","label.last":"Ultima","message.totalDisplay":'<strong><span id="mtgTotal">#{total}</span></strong> filas encontradas',"message.rowsDisplay":', mostrando <strong><span id="mtgFrom">#{from}</span></strong>&nbsp;a&nbsp;<strong><span id="mtgTo">#{to}</span></strong>',"message.pagePrompt":'<td id="my-page-label#{id}"><strong>P&aacute;gina:</strong></td><td>#{input}</td><td>de&nbsp;<strong>#{pages}</strong></td>',"message.noRecordFound":"<strong>No hay filas</strong>","error.required.field":"#{field} debe ser ingresado","error.invalid.creditCard":"valor #{value} no es un numero de targeta valido","error.invalid.range":"valor #{value} esta fuera del rango desde #{from} hasta #{to}","error.invalid.size":"valor #{value} no es un tamano valido entre #{from} a #{to}","error.invalid.max":"valor #{value} excede el maximo valor #{max}","error.invalid.min":"valor #{value} es menos que el minimo permitido #{min}","error.invalid.max.size":"valor #{value} excede el maximo tamano de #{max}","error.invalid.min.size":"valor #{value} es menos que el minimo tamano de #{min}","date.monthAbbreviations":["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],"date.monthNames":["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],"date.dayNames":["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","S&aacute;bado"],"date.dayAbbreviations":["Dom","Lun","Mar","Mie","Jue","Vie","S&aacute;b"],"date.weekDays":["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"]},PT:{"label.ok":"OK","label.now":"Agora","label.today":"Hoje","label.week":"Sem","label.clear":"Limpar","label.add":"Adicionar","label.delete":"Excluir","label.save":"Salvar","label.sortAsc":"Ordem asc","label.sortDesc":"Ordem desc","label.selectAll":"Selecionar tudo","label.loading":"Aguarde ...","label.actions":"A&ccedil;&otilde;es","label.first":"Primeiro","label.last":"Passado","message.totalDisplay":'<strong><span id="mtgTotal">#{total}</span></strong> registros encontrados',"message.rowsDisplay":', mostrando <strong><span id="mtgFrom">#{from}</span></strong>&nbsp;at&eacute;&nbsp;<strong><span id="mtgTo">#{to}</span></strong>',"message.pagePrompt":"<td><strong>P&aacute;gina:</strong></td><td>#{input}</td><td>de&nbsp;<strong>#{pages}</strong></td>","message.noRecordFound":"<strong>Sem registros</strong>","error.required.field":"#{field} &eacute; obrigat&oacute;rio","error.invalid.creditCard":"valor #{value} n&atilde;o &eacute; um n&uacute;mero de cart&atilde;o v&aacute;lido","error.invalid.range":"valor #{value} est&aacute; fora do intervalo de #{from} at&eacute; #{to}","error.invalid.size":"valor #{value} n&atilde;o &eacute; um tamanho v&aacute;lido entre #{from} e #{to}","error.invalid.max":"valor #{value} excede o m&aacute;ximo valor #{max}","error.invalid.min":"valor #{value} &eacute; menor que o m&iacute;nimo permitido #{min}","error.invalid.max.size":"valor #{value} excede o m&aacute;ximo tamanho de #{max}","error.invalid.min.size":"valor #{value} &eacute; menor que o m&iacute;nimo tamanho de #{min}","date.monthAbbreviations":["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],"date.monthNames":["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],"date.dayNames":["Domingo","Segunda","Ter&ccedil;a","Quarta","Quinta","Sexta","S&aacute;bado"],"date.dayAbbreviations":["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],"date.weekDays":["Do","Se","Te","Qua","Qui","Sex","S&aacute;"]},getMessage:function(a,b){var c,d,e,f,g,h,i,j;b=b||{},i=a,d=window.navigator.userLanguage||window.navigator.language,e=d.substring(0,2).toUpperCase();try{if(f=this[e]||this.EN,f[a]){j=f[a];for(g in b)h=new RegExp("#{"+g+"}","g"),j=j.replace(h,b[g]);return j}}catch(k){c=k,i=a}return i}},function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return g=["January","February","March","April","May","June","July","August","September","October","November","December"],f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=864e5,i=["Su","Mo","Tu","We","Th","Fr","Sa"],d=0,e=function(a){return a>=0&&9>=a&&(a="0"+a),a},l=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],-1==="1234567890".indexOf(b))return!1;return!0},k=function(a,b,c,d){var e,f;for(f=d;f>=c;){if(e=a.substring(b,b+f),e.length<c)return null;if(l(e))return e;f--}return null},m=!0,j={getAmPmHour:function(a){var b;return b=a.getHours(),0===b?12:b>12?b-12:b},getAmPm:function(a){return a.getHours()<12?"AM":"PM"},stripTime:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},daysDistance:function(a,b){return Math.round((a-b)/h)},getDifference:function(a,b){return a.getTime()-b.getTime()},getUTCTime:function(a){return Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())},getTimeSince:function(a,b){return a.getUTCTime()-b.getUTCTime()},isValid:function(b,c){return null!==a.parseString(b,c)},isBefore:function(a,b){return null===b?!1:a.getTime()<b.getTime()},isAfter:function(a,b){return null===b?!1:a.getTime()>b.getTime()},equals:function(a,b){return null===b?!1:a.getTime()===b.getTime()},equalsIgnoreTime:function(b,c){var d,e;return null===c?!1:(d=a.clearTime(new Date(b.getTime())),e=a.clearTime(new Date(c.getTime())),d.getTime()===e.getTime())},getDayName:function(a){return c[a.getDay()]},getDayAbbreviation:function(a){return b[a.getDay()]},getMonthName:function(a){return g[a.getMonth()]},getMonthAbbreviation:function(a){return f[a.getMonth()]},clearTime:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},parseString:function(d,e){var h,i,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;if("undefined"==typeof e||null===e||""===e){for(q=["y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM"],z=["M/d/y","M-d-y","M.d.y","M/d","M-d"],o=["d/M/y","d-M-y","d.M.y","d/M","d-M"],l=m?[q,z,o]:[q,o,z],I=0,M=l.length;M>I;I++)for(w=l[I],J=0,N=w.length;N>J;J++)if(v=w[J],n=a.parseString(d,v),null!==n)return n;return null}for(d+="",e+="",u=0,t=0,i="",D="",E="",H=(new Date).getFullYear(),y=1,j=1,r=0,x=0,C=0,h="",F=0,G=0;t<e.length;){for(i=e.charAt(t),D="";e.charAt(t)===i&&t<e.length;)D+=e.charAt(t++);if("yyyy"===D||"yy"===D||"y"===D){if("yyyy"===D&&(F=4,G=4),"yy"===D&&(F=2,G=2),"y"===D&&(F=2,G=4),H=k(d,u,F,G),null===H)return null;u+=H.length,2===H.length&&(H=H>70?1900+(H-0):2e3+(H-0))}else if("MMM"===D||"NNN"===D){for(y=0,B=f,(D="MMM")&&(B=g.concat(f)),s=K=0,O=B.length;O>K;s=++K)if(A=B[s],d.substring(u,u+A.length).toLowerCase()===A.toLowerCase()){y=s%12+1,u+=A.length;break}if(1>y||y>12)return null}else if("EE"===D||"E"===D){for(B=b,"EE"===D&&(B=c),L=0,P=B.length;P>L;L++)if(p=B[L],d.substring(u,u+p.length).toLowerCase()===p.toLowerCase()){u+=p.length;break}}else if("MM"===D||"M"===D){if(y=k(d,u,D.length,2),null===y||1>y||y>12)return null;u+=y.length}else if("dd"===D||"d"===D){if(j=k(d,u,D.length,2),null===j||1>j||j>31)return null;u+=j.length}else if("hh"===D||"h"===D){if(r=k(d,u,D.length,2),null===r||1>r||r>12)return null;u+=r.length}else if("HH"===D||"H"===D){if(r=k(d,u,D.length,2),null===r||0>r||r>23)return null;u+=r.length}else if("KK"===D||"K"===D){if(r=k(d,u,D.length,2),null===r||0>r||r>11)return null;u+=r.length,r++}else if("kk"===D||"k"===D){if(r=k(d,u,D.length,2),null===r||1>r||r>24)return null;u+=r.length,r--}else if("mm"===D||"m"===D){if(x=k(d,u,D.length,2),null===x||0>x||x>59)return null;u+=x.length}else if("ss"===D||"s"===D){if(C=k(d,u,D.length,2),null===C||0>C||C>59)return null;u+=C.length}else if("a"===D){if("am"===d.substring(u,u+2).toLowerCase())h="AM";else{if("pm"!==d.substring(u,u+2).toLowerCase())return null;h="PM"}u+=2}else{if(d.substring(u,u+D.length)!==D)return null;u+=D.length}}if(u!==d.length)return null;if(2===y)if(H%4===0&&H%100!==0||H%400===0){if(j>29)return null}else if(j>28)return null;return(4===y||6===y||9===y||11===y)&&j>30?null:(12>r&&"PM"===h?r=r-0+12:r>11&&"AM"===h&&(r-=12),new Date(H,y-1,j,r,x,C))},format:function(a,d){var h,i,j,k,l,m,n,o,p,q,r,s;for(d+="",o="",m=0,k="",q="",s=a.getYear()+"",j=a.getMonth()+1,l=a.getDate(),h=a.getDay(),i=a.getHours(),n=a.getMinutes(),p=a.getSeconds(),r={},s.length<4&&(s=""+(+s+1900)),r.y=""+s,r.yyyy=s,r.yy=s.substring(2,4),r.M=j,r.MM=e(j),r.MMM=g[j-1],r.NNN=f[j-1],r.d=l,r.dd=e(l),r.E=b[h],r.EE=c[h],r.H=i,r.HH=e(i),0===i?r.h=12:i>12?r.h=i-12:r.h=i,r.hh=e(r.h),r.K=r.h-1,r.k=r.H+1,r.KK=e(r.K),r.kk=e(r.k),i>11?r.a="PM":r.a="AM",r.m=n,r.mm=e(n),r.s=p,r.ss=e(p);m<d.length;){for(k=d.charAt(m),q="";d.charAt(m)===k&&m<d.length;)q+=d.charAt(m++);o+="undefined"!=typeof r[q]?r[q]:q}return o},add:function(a,b,c){var d;if("undefined"==typeof b||null===b||"undefined"==typeof c||null===c)return a;if(c=+c,"y"===b)a.setFullYear(a.getFullYear()+c);else if("M"===b)a.setMonth(a.getMonth()+c);else if("d"===b)a.setDate(a.getDate()+c);else if("w"===b)for(d=c>0?1:-1;0!==c;){for(a.add("d",d);0===a.getDay()||6===a.getDay();)a.add("d",d);c-=d}else"h"===b?a.setHours(a.getHours()+c):"m"===b?a.setMinutes(a.getMinutes()+c):"s"===b&&a.setSeconds(a.getSeconds()+c);return a},getWeek:function(a){var b,c,d;return d=new Date(a.valueOf()),b=(a.getDay()+6)%7,d.setDate(d.getDate()-b+3),c=d.valueOf(),d.setMonth(0,1),4!==d.getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7),1+Math.ceil((c-d)/6048e5)}},a.date=j}(jQuery);var ToolTip;ToolTip=function(a){return ToolTip=function(){function b(b){var c,d;null==b&&(b={}),this.message=null!=(c=b.message)?c:null,this.parentElement=a(b.parent),this.type=null!=(d=b.type)?d:"info",this.render(),this.parentElement.mouseout(function(a){return function(){return a.hide()}}(this)),this.parentElement.mousemove(function(a){return function(b){var c,d;return c=b.pageX+10,d=b.pageY+10,a.show(c,d)}}(this))}return b.prototype.render=function(){var b,c,d;return c=this.parentElement.attr("id"),d=""+c+"_tooltip",b=[],b.push('<div id="'+d+'" class="my-tooltip my-tooltip-'+this.type+'" style="display:none">'),b.push('<div class="tooltip-inner">'),b.push(this.message),b.push("</div>"),b.push("</div>"),a(document.body).append(b.join("")),this.tooltip=a("#"+d)},b.prototype.show=function(a,b){return this.tooltip.css({position:"absolute",top:b+"px",left:a+"px"}),this.tooltip.show()},b.prototype.hide=function(){return this.tooltip.hide()},b.prototype.remove=function(){var a;this.parentElement.unbind("mousemove"),this.parentElement.unbind("mouseout");try{return this.tooltip.remove()}catch(b){a=b}},b}()}(jQuery);var Checkbox;Checkbox=function(a){return Checkbox=function(){function b(b){this.elements=a(b.input),this.options=a.extend({onClick:null,getValueOf:null,selectable:null},b||{}),this.onClick=b.onClick,this.getValueOf=b.getValueOf,this.selectable=b.selectable,this._decorate(),this._addBehavior()}return b.prototype._decorate=function(){var b,c,d,e;for(this.elements.wrap('<label><div class="my-checkbox"></div></label>'),e=this.elements,c=0,d=e.length;d>c;c++)b=e[c],a(b).is(":checked")&&a(b).parent("div").addClass("active");return this.elements.append("<div></div>")},b.prototype._addBehavior=function(){var b;return b=this.elements.parent("div"),b.on("mousedown",function(b){return function(c){var d,e;return d=a(c.target),e=a("input",d).is(":checked"),e?d.removeClass("active"):d.addClass("active"),null!=b.options.onClick?b.options.onClick(!e,a(d)):void 0}}(this))},b}(),a.fn.myCheckbox=function(a){return null==a&&(a={}),a.input=this,new Checkbox(a),this}}(jQuery);var RadioButton;RadioButton=function(a){return RadioButton=function(){function b(b){this.elements=a(b.input),this.options=a.extend({onClick:null,getValueOf:null},b||{}),this.onClick=b.onClick,this.getValueOf=b.getValueOf,this._decorate(),this._addBehavior()}return b.prototype._decorate=function(){var b,c,d,e;for(this.elements.wrap('<label><div class="my-radio"></div></label>'),e=this.elements,c=0,d=e.length;d>c;c++)b=e[c],a(b).is(":checked")&&a(b).parent("div").addClass("active");return this.elements.append("<div></div>")},b.prototype._addBehavior=function(){var b;return b=this.elements.parent("div"),b.on("mousedown",function(b){return function(c){var d,e,f;return d=a(c.target),e=a("input",d).is(":checked"),f=a("input",d).attr("name"),e||(a("input[name="+f+"]").parent("div").removeClass("active"),d.addClass("active")),null!=b.options.onClick?b.options.onClick(!e,a(d)):void 0}}(this))},b}(),a.fn.myRadioButton=function(a){return null==a&&(a={}),a.input=this,new RadioButton(a),this}}(jQuery);var TextField;TextField=function(a){return TextField=function(){function b(a){null==a&&(a={}),this.baseInitialize(a),null!=a.input&&this.render(a.input,!0)}return b.prototype.baseInitialize=function(a){return this.options=a,this.tableGrid=null,this.options.align||(this.options.align="left"),this.options.required||(this.options.required=!1),this.options.validate||(this.options.validate=null),this.options.initialText||(this.options.initialText=null),this.options.tabIndex?void 0:this.options.tabIndex=null},b.prototype.render=function(b,c){return null==c&&(c=!1),this.input=a(b),this.tooltip=null,this.id=a(b).attr("id"),null==this.options.name&&(this.options.name=this.id),this.options.initialText&&a(b).val(this.options.initialText),this.reset(),"number"===this.options.type&&(this.options.align="right"),this.input.css("textAlign",this.options.align),this.input.attr("autocomplete","off"),a(b).focus(function(a){return function(b){return a.onFocus(b)}}(this)),a(b).blur(function(a){return function(){return a.validate()}}(this)),c?this.decorate(b):void 0},b.prototype.onFocus=function(){return null!==this.options.initialText&&this.input.val()===a.trim(this.options.initialText)?this.input.val(""):void 0},b.prototype.decorate=function(b){var c,d;return null!=this.options.tabIndex&&a(b).attr("tabIndex",this.options.tabIndex),null!=this.options.initialText&&a(b).val(this.options.initialText),d=a(b).width(),c=a(b).height(),a(b).css({width:d-8+"px"}),a(b).wrap("<div></div>"),this.container=a(b).parent(),this.container.addClass("my-textfield-container"),this.container.attr("id",this.id+"_container"),this.container.css({width:d+"px",height:c+"px"})},b.prototype.reset=function(){return null!=this.input?(this.input&&this.input.removeClass("my-textfield-input-error"),this.tooltip&&this.tooltip.remove(),this.input.unbind("blur")):void 0},b.prototype.getValue=function(){return this.input.val()},b.prototype.setTableGrid=function(a){return this.tableGrid=a},b.prototype.validate=function(){var b,c,d;if(c=this.input,d=!0,this.required){if(""===a.trim(c.val()))return c.addClass("my-textfield-input-error"),this.tooltip=new ToolTip({parent:c.parent(),message:i18n.getMessage("error.required.field",{field:c.name}),type:"error"}),!1;c.removeClass("my-textfield-input-error"),this.tooltip&&this.tooltip.remove()}if(this.options.validate){if(b=[],!this.options.validate(this.getValue(),b))return c.addClass("my-textfield-input-error"),b.length>0&&(this.tooltip=new ToolTip({parent:c.parent(),message:b.pop(),type:"error"})),!1;c.removeClass("my-textfield-input-error"),this.tooltip&&this.tooltip.remove()}return d},b}()}(jQuery);var BrowseInput,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};BrowseInput=function(a){return BrowseInput=function(b){function c(a){this.baseInitialize(a),this.afterUpdate=a.afterUpdate||null,this.onClick=a.onClick||null}return __extends(c,b),c.prototype.render=function(a){return c.__super__.render.call(this,a),this.targetElement=a,null!=this.targetElement?this.decorate(this.targetElement):void 0},c.prototype.decorate=function(b){var c,d,e,f,g;return g=a(b).width(),e=a(b).height(),a(b).wrap("<div></div>"),a(b).css("width",g-29+"px"),d=b.parent(),d.attr("id",this.id+"_container"),d.css({width:g+"px",height:e+"px"}),c=a("<div></div>").addClass("my-tablegrid-browse-button").appendTo(d),f=!1,c.on("click",function(a){return function(b){return a.onClick&&a.onClick(),b.stopPropagation(),f=!0}}(this)),this.afterUpdateCallback=function(a){return function(b,c){return null==a.afterUpdate||f||a.afterUpdate(b,c),f=!1}}(this)},c}(TextField)}(jQuery);var Autocompleter,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};Autocompleter=function(a){var b,c;return c=a.util.event,b=a.util.device,Autocompleter=function(d){function e(a){this.baseInitialize(a)}return __extends(e,d),e.prototype.baseInitialize=function(b){return e.__super__.baseInitialize.call(this,b),this.element=a(b.input),this.hasFocus=!1,this.changed=!1,this.active=!1,this.index=0,this.entryCount=0,this.options=a.extend({items:null,listId:null,tokens:[],frequency:.4,minChars:2,url:null,parameters:{},finderParamName:"find",listTextPropertyName:"text",listValuePropertyName:"value",height:null,indicator:null,autoSelect:!1,choices:10,partialSearch:!0,partialChars:1,ignoreCase:!0,fullSearch:!1,getParameters:null,noCache:!1},b||{}),this.options.decorate||(this.options.decorate=function(a){return function(){return a.decorate(a.element)}}(this)),this.options.onShow||(this.options.onShow=function(b){return function(c,d){var e,f,g,h,i,j,k,l,m,n,o;if(c&&d)return i=a(c).offset(),n=a(window).height(),o=a(window).scrollTop(),k=n+o-i.top-a(c).outerHeight(),m=22*b.entryCount+6,h=i.top,g=i.left,l=a(c).outerHeight()+h+2,e=a(c).closest("div").width()-2,f=g,j="my-arrow-up-pointer",k>=i.top-o?(m>k&&(m=k-10),d.css({top:l+"px",left:f+"px",width:e+"px",height:m+"px"}).addClass(j)):(m>i.top-o?(m=i.top-o-10,l=i.top-(m+4),j="my-arrow-down-pointer"):m>k&&(l=i.top-(m+4),j="my-arrow-down-pointer"),d.css({top:l+"px",left:f+"px",width:e+"px",height:m+"px"}).addClass(j)),a(".inner-list-container",d).css("height",m+"px"),a(".inner-list-container",d).css("width",e+"px"),a(d).show()}}(this)),this.options.onHide||(this.options.onHide=function(b){return function(c,d){return a(d).hide(),b.hasFocus=!1,b.active=!1}}(this)),this.options.selector||(this.options.selector=function(a){return function(){var b,c,d,e,f,g,h,i,j,k;for(i=[],h=[],b=a._getToken(),e=a.options.items,f=a.options.listTextPropertyName,g=a.options.listValuePropertyName,j="",k="",d=0;d<e.length&&i.length<a.options.choices;){for("object"==typeof e[d]?(j=e[d][f],k=e[d][g]):(j=e[d],k=e[d]),c=a.options.ignoreCase?j.toLowerCase().indexOf(b.toLowerCase()):j.indexOf(b);-1!==c;){if(0===c&&j.length!==b.length){i.push('<li id="'+k+'"><strong>'+j.substr(0,b.length)+"</strong>"+j.substr(b.length)+"</li>");break}if(b.length>=a.options.partialChars&&a.options.partialSearch&&-1!==c&&(a.options.fullSearch||/\s/.test(j.substr(c-1,1)))){h.push('<li id="'+k+'">'+j.substr(0,c)+"<strong>"+j.substr(c,b.length)+"</strong>"+j.substr(c+b.length)+"</li>");break}c=a.options.ignoreCase?j.toLowerCase().indexOf(b.toLowerCase(),c+1):j.indexOf(b,c+1)}d++}return h.length&&(i=i.concat(h.slice(0,a.options.choices-i.length))),"<ul>"+i.join("")+"</ul>"}}(this)),"string"==typeof this.options.tokens&&(this.options.tokens=new Array(this.options.tokens)),this.options.getSelectedValue||(this.options.getSelectedValue=function(a){return function(b){var c,d,e,f,g,h,i;if(d=a.options.items,g=b.trim(),null!==d&&d[0]instanceof Object)for(e=a.options.listTextPropertyName,f=a.options.listValuePropertyName,h=0,i=d.length;i>h;h++)if(c=d[h],c[e].trim()===b.trim()){g=c[f];break}return g}}(this)),__indexOf.call(this.options.tokens,"\n")<0&&this.options.tokens.push("\n"),this.observer=null,null!=this.element?this.render(this.element):void 0},e.prototype.render=function(b){var c;return e.__super__.render.call(this,b),this.element=a(b),this.id=this.element.attr("id"),this.oldElementValue=this.element.val(),null==(c=this.options).paramName&&(c.paramName=this.element.name),this.element.attr("autocomplete","off"),this.options.decorate(),this.container=a("#"+this.id+"_container"),a(document).on("click",function(a){return function(b){return a._onBlur(b)}}(this)),this.element.on("keydown",function(a){return function(b){return a._onKeyPress(b)}}(this))},e.prototype.show=function(){return this.options.onShow(this.element,this.update)},e.prototype.onFocus=function(a){return e.__super__.onFocus.call(this,a),this.tokenBounds=null},e.prototype.getItems=function(){return this.options.items},e.prototype.reset=function(){},e.prototype.getUpdatedChoices=function(){var b,c,d;if(this.update||(a(document.body).append('<div id="'+this.id+'_update" class="my-autocompleter-list"><div class="inner-list-container"></div></div>'),this.update=a("#"+this.id+"_update"),this._innerListContainer=a(".inner-list-container",this.update)),this.options.url){if(d=this.options.parameters,d[this.options.finderParamName]=this._getToken(),this.options.getParameters){b=this.options.getParameters();for(c in b)d[c]=b[c]}return this.startIndicator(),a.ajax(this.options.url,{complete:function(b){return function(c){return b.options.items=a.parseJSON(c.responseText),b._stopIndicator(),b.updateChoices(b.options.selector())}}(this),dataType:"json",data:d})}return this.updateChoices(this.options.selector())},e.prototype._retrieveItems=function(){var b,c,d;if(d=this.options.parameters,this.options.getParameters){b=this.options.getParameters();for(c in b)d[c]=b[c]}return a.ajax(this.options.url,{complete:function(b){return function(c){return b.options.items=a.parseJSON(c.responseText)}}(this),dataType:"json",async:!1,data:d})},e.prototype._onBlur=function(b){var c,d,e;if(this.active)return e=a(b.target),c=this.container,d=!0,e.closest(c).size()>0&&(d=!1),d?(this.hide(),this.hasFocus=!1,this.active=!1):void 0},e.prototype.decorate=function(c){var d,e,f;return f=a(c).width(),e=a(c).height(),a(c).css({width:f-8+"px"}),a(c).wrap("<div></div>"),
b.isMobile()&&a(c).attr("readonly","readonly"),d=a(c).closest("div"),d.addClass("my-autocompleter"),d.attr("id",this.id+"_container"),d.css({width:f+"px",height:e+"px"})},e.prototype.hide=function(){return this._stopIndicator(),this.update?(this.update.remove(),this.active=!1,this.hasFocus=!1,this.update=null):void 0},e.prototype.startIndicator=function(){return null!=this.options.indicator?a(this.options.indicator).show():void 0},e.prototype._stopIndicator=function(){return null!=this.options.indicator?a(this.options.indicator).hide():void 0},e.prototype._onKeyPress=function(b){if(this.active)switch(b.keyCode){case c.KEY_TAB:case c.KEY_RETURN:this._selectEntry(),b.stopPropagation();break;case c.KEY_ESC:return this.hide(),this.active=!1,b.stopPropagation(),!0;case c.KEY_LEFT:case c.KEY_RIGHT:return!0;case c.KEY_UP:return this._markPrevious(),this._renderList(),b.stopPropagation(),!0;case c.KEY_DOWN:return this._markNext(),this._renderList(),b.stopPropagation(),!0}else if(b.keyCode===c.KEY_TAB||b.keyCode===c.KEY_RETURN||b.keyCode===c.KEY_DOWN||a.browser.WebKit&&0===b.keyCode)return!0;return this.changed=!0,this.hasFocus=!0,null!=this.observer&&clearTimeout(this.observer),this.observer=setTimeout(function(a){return function(){return a.onObserverEvent()}}(this),1e3*this.options.frequency),!0},e.prototype.activate=function(){return this.changed=!1,this.hasFocus=!0,this.getUpdatedChoices()},e.prototype.onHover=function(b){var c;return c=a(b.target).closest("LI")[0],this.index!==a(c).data("autocompleteIndex")?(this.index=a(c).data("autocompleteIndex"),this._renderList()):void 0},e.prototype.onClick=function(b){var c;return c=a(b.target).closest("LI")[0],this.index=a(c).data("autocompleteIndex"),this._selectEntry(),this.hide()},e.prototype._renderList=function(){var b,c,d;if(!(this.entryCount>0))return this.active=!1,this.hide();for(b=c=0,d=this.entryCount;d>=0?d>c:c>d;b=d>=0?++c:--c)this.index===b?a(this._getEntry(b)).addClass("selected"):a(this._getEntry(b)).removeClass("selected");return this.hasFocus?(this.show(),this.active=!0):void 0},e.prototype._getEntry=function(b){return a("LI",this.update)[b]},e.prototype._markPrevious=function(){return this.index>0?this.index--:this.index=this.entryCount-1,this._syncScroll(this._getEntry(this.index),!1)},e.prototype._markNext=function(){return this.index<this.entryCount-1?this.index++:this.index=0,this._syncScroll(this._getEntry(this.index),!0)},e.prototype._syncScroll=function(b,c){var d,e,f;if(null!=b&&(f=this._innerListContainer.height(),d=this._innerListContainer.scrollTop(),e=a(b).position().top,!(e>d&&d+f-10>e)))return c?this._innerListContainer.scrollTop(e-(f-a(b).height()-5)):this._innerListContainer.scrollTop(e)},e.prototype.getCurrentEntry=function(){return this._getEntry(this.index)},e.prototype._selectEntry=function(){return this._updateElement(this.getCurrentEntry())},e.prototype.getValue=function(){return this.oldElementValue},e.prototype._updateElement=function(b){var c,d,e,f;return this.options.updateElement?void this.options.updateElement(b):(e=a(b).not("informal").text(),c=this._getTokenBounds(),-1!==c[0]?(d=this.element.val().substr(0,c[0]),f=this.element.val().substr(c[0]).match(/^\s+/),f&&(d+=f[0]),this.element.val(d+e+this.element.val().substr(c[1]))):this.element.val(e),this.oldElementValue=this.element.val(),this.element.val(e),this.oldElementValue=this.element.val(),this.validate(),this.element.focus(),this.options.afterUpdate?this.options.afterUpdate(this.element,b):void 0)},e.prototype.updateChoices=function(b){var c,d;return!this.changed&&this.hasFocus?(a(".inner-list-container",this.update).html(b),d=0,c=a("LI",this.update),this.entryCount=c.length,this.addObservers(c),this._stopIndicator(),void 0===this.index&&(this.index=0),1===this.entryCount&&this.options.autoSelect?(this._selectEntry(),this.hide()):this._renderList()):void 0},e.prototype.addObservers=function(b){return b.mouseover(function(a){return function(b){return a.onHover(b)}}(this)),b.on("click",function(a){return function(b){return a.onClick(b)}}(this)),b.each(function(b,c){return a(c).data("autocompleteIndex",b)})},e.prototype.onObserverEvent=function(){return this.changed=!1,this.tokenBounds=null,this._getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide()),this.oldElementValue=this.element.val()},e.prototype._getToken=function(){var b;return b=this._getTokenBounds(),a.trim(this.element.val().substring(b[0],b[1]))},e.prototype._getTokenBounds=function(){var b,c,d,e,f,g,h,i;if(this.tokenBounds)return this.tokenBounds;if(i=this.element.val(),""===a.trim(i))return[-1,0];for(b=this.getFirstDifferencePos(i,this.oldElementValue),f=b===this.oldElementValue.length?1:0,g=-1,e=i.length,c=0,d=this.options.tokens.length;d>c;)h=i.lastIndexOf(this.options.tokens[c],b+f-1),h>g&&(g=h),h=i.indexOf(this.options.tokens[c],b+f),-1!==h&&e>h&&(e=h),++c;return this.tokenBounds=[g+1,e]},e.prototype.getFirstDifferencePos=function(a,b){var c,d,e;for(c=Math.min(a.length,b.length),d=e=0;c>=0?c>e:e>c;d=c>=0?++e:--e)if(a[d]!==b[d])return d;return c},e.prototype.getSelectedValue=function(a){return null==a&&(a=this.element.val()),this.options.getSelectedValue(a)},e}(TextField)}(jQuery);var ComboBox,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};ComboBox=function(a){var b,c;return c=a.util.event,b=a.util.device,ComboBox=function(d){function e(a){var b;this.baseInitialize(a),null==(b=this.options).minChars&&(b.minChars=0)}return __extends(e,d),e.prototype._keyPress=function(a){return a.which!==c.KEY_DOWN||this.active?void 0:(this.changed=!1,this.showAll())},e.prototype.render=function(a){return e.__super__.render.call(this,a),this.element.keydown(function(a){return function(b){return a._keyPress(b)}}(this))},e.prototype.showAll=function(){return this.active?this.options.onHide(this.element,this.update):(this.update||(this.update=a('<div id="'+this.id+'_update" class="my-autocompleter-list"><div class="inner-list-container"></div></div>'),this._innerListContainer=a(".inner-list-container",this.update),a(document.body).append(this.update)),this.element.focus(),this.element.select(),this.hasFocus=!0,this.active=!0,this.getAllChoices(),this.index>=0?this._syncScroll(this._getEntry(this.index),!0):void 0)},e.prototype.getAllChoices=function(){return this.updateChoices(this.all())},e.prototype.all=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(b=a(this.element).val(),k=[],l="",m="",e=[],this.options.items&&!this.options.noCache)e=this.options.items;else if(this.options.url){if(j=this.options.parameters,this.options.getParameters){h=this.options.getParameters();for(i in h)j[i]=h[i]}a.ajax(this.options.url,{complete:function(b){return function(c){return e=b.options.items=a.parseJSON(c.responseText)}}(this),dataType:"json",data:j,async:!1})}for(f=this.options.listTextPropertyName,g=this.options.listValuePropertyName,c=0,n=0,o=e.length;o>n;n++)d=e[n],"object"==typeof d?(l=d[f],m=d[g]):(l=d,m=d),c++,b===l&&(this.index=c-1),k.push('<li id="'+m+'">'+l+"</li>");return"<ul>"+k.join("")+"</ul>"},e.prototype.decorate=function(c){var d,e,f,g;return g=a(c).width(),f=a(c).height(),a(c).wrap("<div></div>"),a(c).css({width:g-25+"px"}),b.isMobile()&&a(c).attr("readonly","readonly"),e=a(c).parent(),e.addClass("my-autocompleter"),e.attr("id",this.id+"_container"),e.css({width:g+"px",height:f+"px"}),d=a("<div></div>"),d.addClass("my-combobox-button gradient"),e.append(d),d.on("click",function(a){return function(b){return a.showAll(),b.stopPropagation()}}(this))},e}(Autocompleter)}(jQuery);var DatePicker,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};DatePicker=function(a){var b,c,d,e,f;return b=a.util.date,e=a.util.math,d=a.util.event,f=a.util.number,c=a.util.device,DatePicker=function(g){function h(c){var d,e;this.baseInitialize(c),this._mdpId=a(".my-datepicker-container").length+a(".my-datepicker").length+1,this._targetElement=a(c.input),this.visibleFlg=!1,this._tableGrid=null,this.options=a.extend({embedded:!1,embeddedId:null,format:"MM/dd/yyyy",popup:null,time:!1,buttons:!0,clearButton:!0,yearRange:10,minuteInterval:5,changeMonth:!1,changeYear:!1,changeTime:!1,showWeek:!1,numberOfMonths:1,selectOtherMonth:!0,validate:null,firstDayOfWeek:0},c||{}),this.options.changeTime&&(this.options.format+=" hh:mm"),this.options.firstDayOfWeek>0&&b.setFirstDayOfWeek(this.options.firstDayOfWeek),this.options.embedded||null==this._targetElement?this.options.embedded&&null!=this._targetElement&&(d=this.options.input?this.options.input:"myDatePicker"+this._mdpId,e=this.options.embeddedId?this.options.embeddedId:document.body,a(e).append('<input type="hidden" id="'+d+'" name="'+d+'">'),this.options.input=d,this._targetElement=a(d),this.show()):this.render(this._targetElement)}return __extends(h,g),h.prototype.render=function(b){return h.__super__.render.call(this,b),this._targetElement=a(b),this._targetElement.is("input")||(this._targetElement=this._targetElement.find("input")),this.options.popupBy=this._targetElement,this.options.onchange=this._targetElement.onchange,this.options.embedded?void 0:(this.keyPressHandler=function(a){return function(b){return a._keyPress(b)}}(this),this._targetElement.keydown(this.keyPressHandler),this.decorate(this._targetElement))},h.prototype.decorate=function(b){var d,e,f;return f=a(b).width(),e=a(b).height(),c.isMobile()&&a(b).attr("readonly","readonly"),a(b).wrap("<div></div>"),a(b).css({width:f-30+"px"}),this.container=a(b).parent(),this.container.addClass("my-datepicker-container"),this.container.id=this.id+"-container",this.container.css({width:f+"px",height:e+"px"}),d=a("<div></div>"),d.addClass("my-datepicker-select-button"),this.container.append(d),d.click(function(a){return function(b){return b.stopPropagation(),a.show()}}(this))},h.prototype.show=function(){return this.visibleFlg?void 0:(this._parseDate(),this._callback("beforeShow"),this._initCalendarDiv(),this.options.embedded||(this._positionCalendarDiv(),this._closeIfClickedOutHandler=function(a){return function(b){return a._closeIfClickedOut(b)}}(this),a(document).click(this._closeIfClickedOutHandler)),this._callback("afterShow"),this.visibleFlg=!0,null!=this._tableGrid?this._tableGrid.keys.releaseKeys():void 0)},h.prototype.getId=function(){return this._mdpId},h.prototype._initCalendarDiv=function(){var b,c,d,e;return c=0,b=[],d=null,e="",this.options.embedded?d=this._targetElement.parent():(d=a(this.options.embeddedId?this.options.embeddedId:document.body),e="position: absolute; visibility: hidden; left:0; top:0;"),1===this.options.numberOfMonths&&(e+="width: 220px;"),b[c++]='<div id="my-datepicker-div'+this._mdpId+'" class="my-datepicker" style="'+e+'">',b[c++]='    <div class="my-datepicker-top" style="clear:left"></div>',b[c++]='    <div class="header" style="clear:left"></div>',b[c++]='    <div class="body" style="clear:left"></div>',b[c++]="</div>",a(d).append(b.join("")),this._calendarDiv=a("#my-datepicker-div"+this._mdpId),this._headerDiv=a(".header",this._calendarDiv),this._bodyDiv=a(".body",this._calendarDiv),this._footerDiv=a(".footer",this._calendarDiv),this._initHeaderDiv(),this.options.embedded||(this._initButtonsDiv(),this._initButtonDivBehavior()),this._initCalendarGrid(),this._initHeaderDivBehavior(),this._updateTime(!0),this._refresh()},h.prototype._positionCalendarDiv=function(){var b,c,d,e,f,g,h,i,j,k,l;if(!this.options.embedded)return b=!1,d=this._calendarDiv.height(),l=a(window).scrollTop(),k=a(window).height(),e=a(this.options.popupBy).offset(),i=e.top,g=e.left,f=a(this.options.popupBy).height(),c=i+f,c+d>l+k&&c-d>l&&(b=!0),h=g+"px",j=b?i-d-10:i+f+10+"px",this._calendarDiv.addClass(b?"my-arrow-down-pointer":"my-arrow-up-pointer"),this._calendarDiv.css("left",h),this._calendarDiv.css("top",j),this._calendarDiv.css("visibility","")},h.prototype._initHeaderDiv=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n;for(a=this._headerDiv,e=this._mdpId,h=this.options.numberOfMonths,h>1&&(this.options.changeMonth=!1,this.options.changeYear=!1),f=0,c=[],d=j=1;h>=1?h>=j:j>=h;d=h>=1?++j:--j){if(c[f++]='<span id="mdpMonthYear-'+e+"_"+d+'" class="month-year">',this.options.changeMonth){for(c[f++]='<select class="month">',g=k=0;11>=k;g=++k)c[f++]='<option value="'+g+'">'+b.getMonthNames()[g]+"</option>";c[f++]="</select>"}if(this.options.changeYear){for(c[f++]='<select class="year">',n=this._yearRange(),l=0,m=n.length;m>l;l++)i=n[l],c[f++]='<option value="'+i+'">'+i+"</option>";c[f++]="</select>"}c[f++]="</span>"}return c[f++]='<a class="toolbar-button prev"><span class="icon" style="margin: 1px 0">&nbsp;</span></a>',c[f++]='<a class="toolbar-button next"><span class="icon" style="margin: 1px 0">&nbsp;</span></a>',a.append(c.join(""))},h.prototype._initHeaderDivBehavior=function(){var b;return b=this._headerDiv,a(".next",b).click(function(a){return function(b){return a._navMonth(a.date.getMonth()+1)}}(this)),a(".prev",b).click(function(a){return function(b){return a._navMonth(a.date.getMonth()-1)}}(this)),this.monthSelect=a(".month",b),this.monthSelect.change(function(b){return function(){return b._navMonth(a(":selected",b.monthSelect).val())}}(this)),this.yearSelect=a(".year",b),this.yearSelect.change(function(b){return function(){return b._navYear(a(":selected",b.yearSelect).val())}}(this))},h.prototype._initCalendarGrid=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o;for(g=this._mdpId,c=this._bodyDiv,j=this.options.numberOfMonths,k=this.options.showWeek,h=0,e=[],f=0,e[h++]='<table border="0" cellpadding="0" cellspacing="0" width="100%">',e[h++]="<thead>",e[h++]='<tr class="weekDaysRow">',f=l=0;j>=0?j>l:l>j;f=j>=0?++l:--l)k&&(f>0?e[h++]='<th class="new-month-separator">'+i18n.getMessage("label.week")+"</th>":e[h++]="<th>"+i18n.getMessage("label.week")+"</th>"),a.each(b.getWeekDays(),function(a,b){return f>0&&a%7===0&&!k?e[h++]='<th class="new-month-separator">'+b+"</th>":e[h++]='<th class="weekday">'+b+"</th>"});for(e[h++]="</tr>",e[h++]="</thead>",e[h++]="<tbody>",f=m=0;6>m;f=++m){for(e[h++]='<tr class="row-'+f+'">',i=n=0,o=7*j;o>=0?o>n:n>o;i=o>=0?++n:--n)k&&i%7===0&&(i>0?e[h++]='<td class="week-number new-month-separator"><div></div></td>':e[h++]='<td class="week-number"><div></div></td>'),d="day",(i%7===0||(i+1)%7===0)&&(d+=" weekend"),i>0&&i%7===0&&!k&&(d+=" new-month-separator"),e[h++]='<td id="mdpC'+g+"_c"+i+"r"+f+'" class="'+d+'"><div></div></td>';e[h++]="</tr>"}return e[h++]="</tbody>",e[h++]="</table>",c.append(e.join("")),this._daysTable=a("table",c),this._allCells=a("td.day",this._daysTable)},h.prototype._initButtonsDiv=function(){var a,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r;if(c=this._footerDiv,h=0,g=[],this.options.changeTime){for(g[h++]='<span class="time-controls">',j=[[" - ",""]],a=new Date,g[h++]='<select class="hour">',j=function(){for(q=[],k=0;23>=k;k++)q.push(k);return q}.apply(this).map(function(c){return a.setHours(c),[b.getAmPmHour(a)+" "+b.getAmPm(a),c]}),l=0,o=j.length;o>l;l++)d=j[l],g[h++]='<option value="'+d[1]+'">'+d[0]+"</option>";for(g[h++]="</select>",g[h++]='<span class="separator">:</span>',g[h++]='<select class="minute">',e=function(){for(r=[],m=0;59>=m;m++)r.push(m);return r}.apply(this).filter(function(a){return function(b){return b%a.options.minuteInterval===0}}(this)),j=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)i=e[a],c.push([f.toPaddedString(i,2),i]);return c}(),n=0,p=j.length;p>n;n++)i=j[n],g[h++]='<option value="'+i[1]+'">'+i[0]+"</option>";g[h++]="</select>",g[h++]="</span>"}return c.append(g.join(""))},h.prototype._initButtonDivBehavior=function(){var b;return b=this._footerDiv,this.hourSelect=a(".hour",b),this.minuteSelect=a(".minute",b),this.hourSelect.change(function(b){return function(c){return b._updateSelectedDate({hour:a(":selected",b.hourSelect).val(),minute:a(":selected",b.minuteSelect).val()})}}(this)),this.minuteSelect.change(function(b){return function(c){return b._updateSelectedDate({hour:a(":selected",b.hourSelect).val(),minute:a(":selected",b.minuteSelect).val()})}}(this)),a(".close-button",b).click(function(a){return function(b){return a._close()}}(this)),a(".clear-button",b).click(function(a){return function(b){return a.clearDate(),a.options.embedded?void 0:a._close()}}(this))},h.prototype._refresh=function(){return this._refreshCalendarGrid(),this._refreshMonthYear(),this._setSelectedClass(),this._applyKeyboardBehavior()},h.prototype._refreshCalendarGrid=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;for(k=this.options.numberOfMonths,o=this.options.showWeek,m=this.options.selectOtherMonth,a=b.stripTime(this.date),c=this.date.getMonth(),d=this.date.getFullYear(),p=b.stripTime(new Date),this._daysTable.find("td").removeAttr("id").removeAttr("class"),this._daysTable.find("td div").html(""),y=[],i=u=1;k>=1?k>=u:u>=k;i=k>=1?++u:--u){for(a=new Date(d,c,1),a.setHours(12),l=a.getDay(),a.setDate(1-l+b.getFirstDayOfWeek()),0===l&&1===b.getFirstDayOfWeek()&&(0===l&&1===b.getFirstDayOfWeek()&&(l=6),a.setDate(0-l+b.getFirstDayOfWeek())),n=!1,g=b.daysDistance(a,p),__indexOf.call(function(){for(z=[],v=0;41>=v;v++)z.push(v);return z}.apply(this),g)>=0&&!n&&p.getMonth()===c&&(this._getCellByIndex(g,i).addClass("today"),n=!0),h=w=0;42>w;h=++w)f=a.getDate(),j=a.getMonth(),e=this._getCellByIndex(h,i),q=!0,r=null,h%7!==0||!o||j!==c&&0!==h||(r=e.prev(),r.addClass("week-number"),r.find("div").html(b.getWeek(a))),j!==c&&(e.addClass("other"),m||(q=!1)),q&&(x=this._getCellCoords(h,i),s=x.x,t=x.y,e.addClass("day"),(s%7===0||(s+1)%7===0)&&e.addClass("weekend"),e.attr("id","mdpC"+this._mdpId+"_c"+s+"r"+t),e.find("div").html(f),e.data("day",f),e.data("month",j),e.data("year",a.getFullYear())),a.setDate(f+1);c+1>11?(c=0,y.push(d++)):y.push(c++)}return y},h.prototype._getCellOffset=function(a,b){var c,d,e;return c=this.options.numberOfMonths,e=Math.floor(a/7),d=a,b>1&&(d+=(b-1)*(e+1)*7),c>1&&e>0&&(d+=(c-b)*e*7),d},h.prototype._getCellByIndex=function(b,c){var d;return d=this._getCellOffset(b,c),a(this._allCells[d])},h.prototype._getCellCoords=function(a,b){var c,d,e,f;return c=this.options.numberOfMonths,d=this._getCellOffset(a,b),e=d%(7*c),f=Math.floor(a/7),{x:e,y:f}},h.prototype._refreshMonthYear=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(e=this._mdpId,g=this.date.getMonth(),k=this.date.getFullYear(),h=this.options.numberOfMonths,i=this._calendarDiv.width(),j=i/h,this.options.changeMonth)a("#mdpMonthYear-"+e+"_1").width(j).css("padding","2px 0"),this._setSelectBoxValue(this.monthSelect,g);else for(d=l=1;h>=1?h>=l:l>=h;d=h>=1?++l:--l)a("#mdpMonthYear-"+e+"_"+d).width(j).html(b.getMonthNames()[g]),g+1>11?g=0:g++;if(this.options.changeYear){if(this._flexibleYearRange()&&(!this._setSelectBoxValue(this.yearSelect,k)||this.yearSelect[0].selectedIndex<=1||this.yearSelect[0].selectedIndex>=this.yearSelect[0].options.length-2)){for(f=0,c=[],p=this._yearRange(),m=0,o=p.length;o>m;m++)k=p[m],c[f++]='<option value="'+k+'">'+k+"</option>";this.yearSelect.html(c.join(""))}return this._setSelectBoxValue(this.yearSelect,k)}for(g=this.date.getMonth(),q=[],d=n=1;h>=1?h>=n:n>=h;d=h>=1?++n:--n)a("#mdpMonthYear-"+e+"_"+d).append("&nbsp;"+k),g+1>11?(g=0,q.push(k++)):q.push(g++);return q},h.prototype._yearRange=function(){var a,b,c,d,e;return this._flexibleYearRange()?(a=this.date.getFullYear(),function(){e=[];for(var b=c=a-this.options.yearRange,d=a+this.options.yearRange;d>=c?d>=b:b>=d;d>=c?b++:b--)e.push(b);return e}.apply(this)):function(){d=[];for(var a=b=this.options.yearRange[0],c=this.options.yearRange[1];c>=b?c>=a:a>=c;c>=b?a++:a--)d.push(a);return d}.apply(this)},h.prototype._setSelectBoxValue=function(b,c){var d;return d=a("option[value="+c+"]",b).attr("selected","selected").size(),d>0},h.prototype._flexibleYearRange=function(){return"number"==typeof this.options.yearRange},h.prototype._validYear=function(a){return this._flexibleYearRange()?!0:__indexOf.call(this._yearRange(),a)>=0},h.prototype._dayHover=function(a){var b;return b=new Date(this.selectedDate),b.setYear(a.data("year")),b.setMonth(a.data("month")),b.setDate(a.data("day")),this._keys.setFocus(a,!1)},h.prototype._dayHoverOut=function(a){return this._keys.removeFocus(a)},h.prototype._dayClick=function(a){return this._keys.setFocus(a,!1),this._updateSelectedDate(a,!0)},h.prototype._clearSelectedClass=function(){return this.selectedCell?this.selectedCell.removeClass("selected"):void 0},h.prototype._setSelectedClass=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n;if(this.selectionMade){for(this._clearSelectedClass(),i=b.stripTime(this.selectedDate),g=this.options.numberOfMonths,a=b.stripTime(this.date),c=this.date.getMonth(),d=this.date.getFullYear(),m=[],f=k=1;g>=1?g>=k:k>=g;f=g>=1?++k:--k)a=new Date(d,c,1),a.setHours(12),h=a.getDay(),a.setDate(1-h+b.getFirstDayOfWeek()),j=!1,e=b.daysDistance(a,i),__indexOf.call(function(){for(n=[],l=0;41>=l;l++)n.push(l);return n}.apply(this),e)>=0&&!j&&(this.selectedCell=this._getCellByIndex(e,f).addClass("selected"),j=!0),c+1>11?(c=0,m.push(d++)):m.push(c++);return m}},h.prototype.dateString=function(){return this.selectionMade?b.format(this.selectedDate,this.options.format):"&#160;"},h.prototype.getValue=function(){return null!==this.input.val()&&this.input.val().trim().length>0?b.parseString(this.input.val(),this.options.format):null},h.prototype._parseDate=function(){var a,c,d;return a=this._targetElement.val().trim(),this.selectionMade=""!==a,this.date=""===a?NaN:b.parseString(this.options.date||a,this.options.format),(isNaN(this.date)||null===this.date)&&(this.date=new Date),this._validYear(this.date.getFullYear())||(d=this._yearRange(),c=this.date.getFullYear()<d[0]?d[0]:d[d.length-1],this.date.setYear(c)),this.selectedDate=this.date},h.prototype.clearDate=function(){var a;return this._targetElement.is(":disabled")||this._targetElement.attr("readonly")?!1:(a=this._targetElement.val(),this._targetElement.val(""),this._clearSelectedClass(),a!==this._targetElement.val()?this._callback("onchange"):void 0)},h.prototype._updateSelectedDate=function(a,c){var d;if(!this._targetElement.is(":disabled")&&!this._targetElement.attr("readonly")&&(d=null,a instanceof jQuery?d=new Date(a.data("year"),a.data("month"),a.data("day")):(a.day&&(d=new Date(a.year,a.month,a.day)),isNaN(a.hour)||isNaN(a.minute)||(null===d&&(d=new Date(this.selectedDate.getTime())),d.setHours(a.hour),d.setMinutes(e.floorToInterval(a.minute,this.options.minuteInterval)))),b.equals(d,this.selectedDate)||(this.selectedDate=d,this.selectionMade=!0),this._setSelectedClass(),this.selectionMade&&this._updateValue(),this._close(),this.options.afterUpdate&&this.options.afterUpdate(this._targetElement,d),c&&!this.options.embedded))return this._close(),this._targetElement.focus()},h.prototype._navMonth=function(a){var b;return b=new Date(this.date),b.setMonth(a),this._navTo(b)},h.prototype._navYear=function(a){var b;return b=new Date(this.date),b.setYear(a),this._navTo(b)},h.prototype._navTo=function(a){return this._validYear(a.getFullYear())?(this.date=a,this.date.setDate(1),this._refresh(),this._callback("after_navigate",this.date),!0):!1},h.prototype._updateTime=function(a){var b,c;if(!this.options.embedded)return a&&this.options.changeTime&&this.selectedDate?(c=e.floorToInterval(this.selectedDate.getMinutes(),this.options.minuteInterval),b=this.selectedDate.getHours(),this.hourSelect.val(b),this.minuteSelect.val(c)):void 0},h.prototype._updateValue=function(){var a;return a=this._targetElement.val(),this._targetElement.val(this.dateString()),a!==this._targetElement.val()?this._callback("onchange"):void 0},h.prototype._today=function(a){var b,c;return b=new Date,this.date=new Date,c={day:b.getDate(),month:b.getMonth(),year:b.getFullYear()},a&&(c.hour=b.getHours(),c.minute=b.getMinutes()),this._updateSelectedDate(c,!0),this._refresh()},h.prototype._close=function(){return this.visibleFlg?(this._callback("beforeClose"),a(document).unbind("click",this._closeIfClickedOutHandler),this._calendarDiv.remove(),this._keys.releaseKeys(),this._keys.stop(),this._keys=null,this.visibleFlg=!1,null!=this._tableGrid&&this._tableGrid.keys.captureKeys(),this._callback("afterClose")):!1},h.prototype._closeIfClickedOut=function(b){var c;return c=a(b.target),0===c.closest(this._calendarDiv).size()&&0===c.closest(this.container).size()?this._close():void 0},h.prototype._keyPress=function(a){var b;return b=a.which,b!==d.KEY_DOWN||this.visibleFlg?b===d.KEY_ESC&&this.visibleFlg&&(this._close(),a.stopPropagation()):(this.show(),a.stopPropagation(),this._keys.captureKeys()),!0},h.prototype._callback=function(a,b){return this.options[a]?this.options[a].bind(this._targetElement)(b):void 0},h.prototype._applyKeyboardBehavior=function(){var b,c,d,e,f,g,h,i,j,k,l;for(h=this.options.numberOfMonths,this._keys=new KeyTable(this._daysTable,{idPrefix:"#mdpC"+this._mdpId+"_",numberOfColumns:7*h,firstRowElement:a("tr.weekDaysRow",this._bodyDiv)}),e=function(a){return function(b){return a._dayHover(b)}}(this),c=function(a){return function(b){return a._updateSelectedDate(b,!0)}}(this),f=function(b){return function(c){var d;return d=a(c.target).closest("td"),b._dayHover(d)}}(this),g=function(b){return function(c){var d;return d=a(c.target).closest("td"),b._dayHoverOut(d)}}(this),d=function(b){return function(c){var d;return d=a(c.target).closest("td"),b._dayClick(d)}}(this),a("td",this._calendarDiv).unbind("mouseenter"),a("td",this._calendarDiv).unbind("mouseleave"),a("td",this._calendarDiv).unbind("click"),a("td.day",this._calendarDiv).on("mouseenter",f),a("td.day",this._calendarDiv).on("mouseleave",g),a("td.day",this._calendarDiv).on("click",d),l=this._keys._cm,j=0,k=l.length;k>j;j++)b=l[j],this._keys.events.focus(b,e),this._keys.events.action(b,c);return i=a("td.day:first",this._bodyDiv),this._dayHover(i)},h}(TextField)}(jQuery);var KeyTable;KeyTable=function(a){var b;return b=a.util.event,KeyTable=function(){function c(b,c){var d,e,f,g,h,i,j,k,l,m;for(this.options=a.extend({idPrefix:"",cellFocusClass:"focus",firstRowElement:null},c||{}),this._tableGrid=null,this._cm=null,null!=b._columnModel?(this._cm=b._columnModel,this._numberOfRows=b.rows.length,this._numberOfColumns=b._columnModel.length,this._tableGrid=b,this._bodyDiv=a(b.bodyDiv),this._targetTable=a(b.bodyTable)):b.is("table")&&(this._cm=this._buildColumnModel(b),this._targetTable=a(b),this._numberOfRows=this._targetTable.find("tbody > tr").length,this._numberOfColumns=c.numberOfColumns||this._targetTable.find("tbody > tr")[0].cells.length),null!=this._tableGrid&&(this.options.idPrefix="#mtgC"+this._tableGrid._mtgId+"_"),this._tableBody=this._targetTable.find("tbody"),this._xCurrentPos=null,this._yCurrentPos=null,this._nCurrentFocus=null,this._nOldFocus=null,this._topLimit=0,this._blockKeyCaptureFlg=!0,this._isInputFocusedFlg=!1,this._xCurrentPos=0,this._yCurrentPos=0,this.events={remove:{}},l=["action","esc","focus","blur"],h=0,j=l.length;j>h;h++)e=l[h],this.events[e]=this._insertAddEventTemplate(e),this.events.remove[e]=this._insertRemoveEventTemplate(e);for(m=this._cm,i=0,k=m.length;k>i;i++)d=m[i],d.events={};this._onClickHandler=function(b){return function(c){var d,e;if(null!=b._nCurrentFocus)return e=a(c.target),d=!0,e.closest(b._targetTable).length>0&&(d=!1),e.closest("my-autocompleter, my-autocompleter-list, my-datepicker-container").length>0&&(d=!1),d?(b.removeFocus(b._nCurrentFocus,!0),b._nOldFocus=null):void 0}}(this),a(document).on("click",this._onClickHandler),f=null,g=null,this._tableBody.on("mousedown",function(a){return function(a){return f=a.pageX,g=a.pageY}}(this)),this._tableBody.on("mouseup",function(b){return function(c){var d;if(f===c.pageX&&g===c.pageY)return d=a(c.target).closest("td"),d!==b._nCurrentFocus&&(b.setFocus(d),b.captureKeys()),b._eventFire("focus",d)}}(this)),this._tableBody.on("dblclick",function(b){return function(c){var d;return d=a(c.target).closest("td"),b._eventFire("action",d)}}(this)),this._onKeyPressHandler=function(a){return function(b){return a._onKeyPress(b)?(b.stopPropagation(),b.preventDefault()):void 0}}(this),a(document).on("keydown",this._onKeyPressHandler)}return c.prototype._insertAddEventTemplate=function(a){return function(b){return function(c,d){return b._addEvent(a,c,d)}}(this)},c.prototype._insertRemoveEventTemplate=function(a){return function(b){return function(c){return b._removeEvent(a,c)}}(this)},c.prototype._addEvent=function(a,b,c){return b.events[a]=c},c.prototype._removeEvent=function(a,b){return delete b.events[a]},c.prototype._onKeyPress=function(a){var c,d,e,f,g;if(this._blockKeyCaptureFlg)return!1;if(a.metaKey||a.altKey||a.ctrlKey)return!1;for(f=this._xCurrentPos,g=this._yCurrentPos,e=this._topLimit,d=a.which===b.KEY_TAB&&a.shiftKey?-1:a.which;;){switch(d){case b.KEY_RETURN:return this._eventFire("action",this._nCurrentFocus),!1;case b.KEY_ESC:return!1;case-1:case b.KEY_LEFT:if(this._isInputFocusedFlg)return!1;if(this._xCurrentPos>0)f=this._xCurrentPos-1,g=this._yCurrentPos;else{if(!(this._yCurrentPos>e))return!0;f=this._numberOfColumns-1,g=this._yCurrentPos-1}break;case b.KEY_UP:if(this._isInputFocusedFlg)return!1;if(!(this._yCurrentPos>e))return!0;f=this._xCurrentPos,g=this._yCurrentPos-1;break;case b.KEY_TAB:case b.KEY_RIGHT:if(this._isInputFocusedFlg)return!1;if(this._xCurrentPos<this._numberOfColumns-1)f=this._xCurrentPos+1,g=this._yCurrentPos;else{if(!(this._yCurrentPos<this._numberOfRows-1))return!0;f=0,g=this._yCurrentPos+1}break;case b.KEY_DOWN:if(this._isInputFocusedFlg)return!1;if(!(this._yCurrentPos<this._numberOfRows-1))return!0;f=this._xCurrentPos,g=this._yCurrentPos+1;break;default:return!1}if(c=this.getCellFromCoords(f,g),null!==c&&"none"!==c.css("display")&&"none"!==c.closest("tr").css("display"))break;this._xCurrentPos=f,this._yCurrentPos=g}return this.setFocus(c),this._eventFire("focus",c),!0},c.prototype.setFocus=function(a,b){var c,d,e,f,g,h,i,j;if(null==b&&(b=!0),(null==this._nCurrentFocus||!this._nCurrentFocus.is(a))&&(null!=this._nCurrentFocus&&this.removeFocus(this._nCurrentFocus,!1),a.addClass(this.options.cellFocusClass),a.closest("tr").addClass(this.options.cellFocusClass),this._nOldFocus=this._nCurrentFocus,this._nCurrentFocus=a,c=this.getCoordsFromCell(a),this._xCurrentPos=c[0],this._yCurrentPos=c[1],b&&this._bodyDiv)){if(h=this._bodyDiv[0].clientHeight,i=this._bodyDiv[0].clientWidth,g=this._bodyDiv.scrollTop(),f=this._bodyDiv.scrollLeft(),d=a.outerHeight(),j=a.outerWidth(),e=a.position(),e.top+d>g+h?this.setScrollTop(e.top+d-h):e.top<g&&this.setScrollTop(e.top),e.left+j>f+i)return this.setScrollLeft(e.left+j-i);if(e.left<f)return this.setScrollLeft(e.left)}},c.prototype.setScrollTop=function(a){return this._bodyDiv.scrollTop(a)},c.prototype.setScrollLeft=function(a){return this._bodyDiv.scrollLeft(a)},c.prototype._eventFire=function(a,b){var c,d,e,f;return c=this._cm,d=this.getCoordsFromCell(b),e=d[0],f=d[1],null!=c[e].events[a]?(c[e].events[a](b),!0):!1},c.prototype.removeFocus=function(a,b){return null==b&&(b=!0),a?(a.removeClass(this.options.cellFocusClass),b||a.closest("tr").removeClass(this.options.cellFocusClass),this._eventFire("blur",a)):void 0},c.prototype.getCoordsFromCell=function(b){var c,d;return b?(c=a(b).attr("id"),null==c?null:(d=c.match(/c(\d*?)r(\-?\d*?)$/),[parseInt(d[1]),parseInt(d[2])])):null},c.prototype.getCellFromCoords=function(b,c){var d;return d=a(this.options.idPrefix+"c"+b+"r"+c,this._tableBody),0===d.length?null:d},c.prototype.captureKeys=function(){return this._blockKeyCaptureFlg=!1},c.prototype.releaseKeys=function(){return this._blockKeyCaptureFlg=!0},c.prototype.setTopLimit=function(a){return this._topLimit=a},c.prototype.setNumberOfRows=function(a){return this._numberOfRows=a},c.prototype.stop=function(){return a(document).unbind("keydown",this._onKeyPressHandler),
a(document).unbind("click",this._onClickHandler)},c.prototype._buildColumnModel=function(b){var c,d,e;return c=[],d=this.options.firstRowElement,null==d&&(d=a("tr:first",b)),e=d.has("th").size()>0?d.find("th"):d.find("td"),null!==e&&e.each(function(b){var d,e;return d={},e=a(this),d.id=e.is("[id]")?e.attr("id"):"column"+b,d.title=e.text(),d.editable=!1,d.positionIndex=b,c.push(d)}),c},c}()}(jQuery);var TableGrid,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};TableGrid=function($){var HeaderBuilder,arrayUtil,eventUtil,template;return eventUtil=$.util.event,template=$.util.template,arrayUtil=$.util.array,TableGrid=function(){function TableGrid(a){var b,c,d,e,f,g,h;if(this._mtgId=$(".tablegrid").length+1,this.tableModel=a,this._columnModel=a.columnModel||[],this.rows=a.rows||[],this.name=a.name||"",this.options=$.extend({cellHeight:24,pager:null,sortColumnParameter:"sortColumn",ascDescFlagParameter:"ascDescFlg",onCellFocus:null,onCellBlur:null,onPageChange:null,toolbar:null,actionsColumnToolbar:null,afterRender:null,onFailure:null,rowStyle:function(){return""},rowClass:function(a){return a%2===0?"hightlight":""},addSettingBehavior:!1,addDraggingBehavior:!1,addLazyRenderingBehavior:!0,addNewRowsToEndBehaviour:!1,beforeEditRow:null,afterEditRow:null,beforeSaveRow:null,afterSaveRow:null,sortInMemory:!1},a.options||{}),this.pagerHeight=24,this.titleHeight=24,this.toolbarHeight=30,this.scrollBarWidth=18,this.topPos=0,this.leftPos=0,this.selectedHCIndex=0,this.pager=this.options.pager,null!=this.options.pager&&(this.pager.pageParameter=this.options.pager.pageParameter||"page"),this.url=a.url||null,this.request=a.request||{},this.sortedColumnIndex=0,this.sortedAscDescFlg="ASC",this.modifiedRows=[],this.renderedRows=0,this.renderedRowsAllowed=0,this.newRowsAdded=[],this.deletedRows=[],this.editRowFlg=!1,this.editRowIdx=-1,this.options.addNewRowsToEndBehaviour&&(this.options.addLazyRenderingBehavior=!1),this._sortingDataFlg=!1,null!=this.options.actionsColumnToolbar)for(this._columnModel.push({id:"actions"+this._mtgId,title:i18n.getMessage("label.actions")}),g=this.options.actionsColumnToolbar,d=0,f=g.length;f>d;d++)b=g[d],void 0===b.name&&(b.name=b.iconClass),b.hasOwnProperty("visible")||(b.visible=!0);for(this.hb=new HeaderBuilder(this._mtgId,this._columnModel),this.hb.getHeaderRowNestedLevel()>1&&(this.options.addSettingBehavior=!1,this.options.addDraggingBehavior=!1),this.headerWidth=this.hb.getTableHeaderWidth(),this.headerHeight=this.hb.getTableHeaderHeight(),this._columnModel=this.hb.getLeafElements(),c=e=0,h=this._columnModel.length;h>=0?h>e:e>h;c=h>=0?++e:--e)this._columnModel[c].hasOwnProperty("editor")||(this._columnModel[c].editor=new TextField),"checkbox"===this._columnModel[c].editor&&(this._columnModel[c].editor=new TableGrid.CellCheckbox),"radio"===this._columnModel[c].editor&&(this._columnModel[c].editor=new TableGrid.CellRadioButton),this._columnModel[c].hasOwnProperty("editable")||(this._columnModel[c].editable=!1,(this._columnModel[c].editor instanceof TableGrid.CellCheckbox||this._columnModel[c].editor instanceof TableGrid.CellRadioButton)&&(this._columnModel[c].editable=!0)),this._columnModel[c].hasOwnProperty("visible")||(this._columnModel[c].visible=!0),this._columnModel[c].hasOwnProperty("sortable")||(this._columnModel[c].sortable=!0),this._columnModel[c].hasOwnProperty("type")||(this._columnModel[c].type="string"),this._columnModel[c].hasOwnProperty("selectAllFlg")||(this._columnModel[c].selectAllFlg=!1),this._columnModel[c].hasOwnProperty("sortedAscDescFlg")||(this._columnModel[c].sortedAscDescFlg="DESC"),this._columnModel[c].positionIndex=c;this.targetColumnId=null,this.editedCellId=null}return TableGrid.prototype.show=function(a){return this.render(a)},TableGrid.prototype.render=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(this.target=a,$(a).html(this._createTableLayout()),f=this._mtgId,this.tableDiv=$("#myTableGrid"+f),this.headerTitle=$("#mtgHeaderTitle"+f),this.headerToolbar=$("#mtgHeaderToolbar"+f),this.headerRowDiv=$("#headerRowDiv"+f),this.bodyDiv=$("#bodyDiv"+f),this.overlayDiv=$("#overlayDiv"+f),this.innerBodyDiv=$("#innerBodyDiv"+f),this.pagerDiv=$("#pagerDiv"+f),this.resizeMarkerLeft=$("#resizeMarkerLeft"+f),this.resizeMarkerRight=$("#resizeMarkerRight"+f),this.dragColumn=$("#dragColumn"+f),this.colMoveTopDiv=$("#mtgColMoveTop"+f),this.colMoveBottomDiv=$("#mtgColMoveBottom"+f),this.scrollLeft=0,this.scrollTop=0,this.targetColumnId=null,this.alreadyLoadedFlg=!1,this._actionsColumnToolbar={},this.bodyDiv.bind("dom:dataLoaded",function(a){return function(){return a._showLoaderSpinner(),a.bodyTable=$("#mtgBT"+f),a._applyCellCallbacks(),a.alreadyLoadedFlg||(a._applyHeaderButtons(),a._makeAllColumnsResizable(),a.options.addDraggingBehavior&&a._makeAllColumnDraggable(),a.options.addSettingBehavior&&a._applySettingMenuBehavior()),null!=a.keys&&a.keys.stop(),a.keys=new KeyTable(a),a._addKeyBehavior(),a.pager&&a._addPagerBehavior(),null!=a.options.afterRender&&a.options.afterRender(),a._hideLoaderSpinner(),a.alreadyLoadedFlg=!0}}(this)),this.renderedRowsAllowed=Math.floor((this.bodyHeight-this.scrollBarWidth-3)/this.options.cellHeight)+1,this.tableModel.hasOwnProperty("rows")?(this.innerBodyDiv.html(this._createTableBody(this.rows)),this.pager&&this.pagerDiv.html(this._updatePagerInfo()),this.bodyDiv.trigger("dom:dataLoaded")):this._retrieveDataFromUrl(1),null!=this.options.toolbar)for(d=this.options.toolbar||[],g=function(a){return function(b,c){var d;return d=$("#toolbarBtn"+f+"_"+b),d.on("click",function(){var b,e;return a._blurCellElement(a.keys._nCurrentFocus),b=!0,null!=c.beforeClick&&(e=c.beforeClick(d)),e===!1&&(b=e),b&&(null!=c.onClick&&c.onClick(d),null!=c.afterClick)?c.afterClick(d):void 0})}}(this),e=h=0,k=d.length;k>=0?k>h:h>k;e=k>=0?++h:--h)c=d[e],g(e,c);if(null!=this.options.actionsColumnToolbar)for(l=this.options.actionsColumnToolbar,i=0,j=l.length;j>i;i++)b=l[i],this._actionsColumnToolbar[b.name]=b;return this.bodyDiv.bind("scroll",function(a){return function(){return a._syncScroll()}}(this)),$(window).bind("resize",function(a){return function(){return a.resize()}}(this))},TableGrid.prototype._createTableLayout=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;if(k=$(this.target),l=this.options.width||k.width()-this._fullPadding(k,"left")-this._fullPadding(k,"right")+"px",d=this.options.height||k.height()-this._fullPadding(k,"top")-this._fullPadding(k,"bottom")+2+"px",g=this._mtgId,j=0,i=0,this.tableWidth=parseInt(l)-2,i=this.tableHeight=parseInt(d)-2,h=0,e=[],e[h++]='<div id="myTableGrid'+g+'" class="tablegrid" style="position:relative;width:'+this.tableWidth+'"px;height:'+this.tableHeight+'px;z-index:0">',null!=this.options.title&&(e[h++]='<div id="mtgHeaderTitle'+g+'" class="tablegrid-header-title" style="position:absolute;top:'+this.topPos+"px;left:"+this.leftPos+"px;width:"+(this.tableWidth-6)+"px;height:"+(this.titleHeight-6)+'px;padding:3px;z-index:10">',e[h++]=this.options.title,e[h++]="</div>",this.topPos+=this.titleHeight+1),null!=this.options.toolbar){for(c=this.options.toolbar||[],e[h++]='<div id="mtgHeaderToolbar'+g+'" class="tablegrid-toolbar" style="position:absolute;top:'+this.topPos+"px;left:"+this.leftPos+"px;width:"+(this.tableWidth-4)+"px;height:"+(this.toolbarHeight-2)+'px;padding:1px 2px;z-index:10">',b=!1,f=m=0,n=c.length;n>=0?n>m:m>n;f=n>=0?++m:--m)a=c[f],e[h++]='<a id="toolbarBtn'+g+"_"+f+'" class="toolbar-button">',null!=a.iconClass&&(e[h++]='<span class="icon '+a.iconClass+'">&nbsp;</span>'),null!=a.text&&(e[h++]='<span class="text">'+a.text+"</span>"),e[h++]="</a>",f<c.length-1&&(e[h++]='<div class="toolbar-separator">&#160;</div>');e[h++]="</div>",this.topPos+=this.toolbarHeight+1}return j=this.topPos,e[h++]='<div id="headerRowDiv'+g+'" class="header-row" style="position:absolute;top:'+this.topPos+"px;left:"+this.leftPos+"px;width:"+this.tableWidth+"px;height:"+this.headerHeight+'px;padding:0;overflow:hidden;z-index:0">',e[h++]='<div id="mtgHRB'+g+'" style="position:relative;padding:0;margin:0;width:'+(this.headerWidth+21)+"px;height:"+this.headerHeight+'px;">',e[h++]=this.hb._createHeaderRow(),e[h++]="</div>",e[h++]="</div>",this.topPos+=this.headerHeight+1,this.bodyHeight=this.tableHeight-this.headerHeight-3,null!=this.options.title&&(this.bodyHeight=this.bodyHeight-this.titleHeight-1),null!=this.options.pager&&(this.bodyHeight=this.bodyHeight-this.pagerHeight-1),null!=this.options.toolbar&&(this.bodyHeight=this.bodyHeight-this.toolbarHeight-1),i=this.bodyHeight+this.headerHeight,e[h++]='<div id="overlayDiv'+g+'" class="overlay" style="position:absolute;top:'+j+"px;width:"+(this.tableWidth+2)+"px;height:"+(i+2)+'px;overflow:none;">',e[h++]='<div class="loading-box" style="margin-top:'+((i+2)/2-14)+'px">'+i18n.getMessage("label.loading")+"</div>",e[h++]="</div>",e[h++]='<div id="bodyDiv'+g+'" class="tablegrid-body" style="position:absolute;top:'+this.topPos+"px;left:"+this.leftPos+"px;width:"+this.tableWidth+"px;height:"+this.bodyHeight+'px;overflow:auto;">',e[h++]='<div id="innerBodyDiv'+g+'" class="tablegrid-inner-body" style="position:relative;top:0px;width:'+(this.tableWidth-this.scrollBarWidth)+'px;overflow:none;">',e[h++]="</div>",e[h++]="</div>",null!=this.pager&&(this.topPos+=this.bodyHeight+2,e[h++]='<div id="pagerDiv'+g+'" class="tablegrid-pager" style="position:absolute;top:'+this.topPos+"px;left:0;bottom:0;width:"+(this.tableWidth-4)+"px;height:"+(this.pagerHeight-4)+'px">',e[h++]=this._updatePagerInfo(!0),e[h++]="</div>"),this.options.addSettingBehavior&&(e[h++]='<div id="mtgSB'+g+'" class="mini-button" style="position:absolute;z-index:100;top:3px;left:'+(this.tableWidth-20)+'px"><span class="icon setting-button">&nbsp;</span></div>',e[h++]=this._createSettingMenu()),e[h++]='<div id="mtgHB'+g+'" class="header-button" style="width:14px;height:'+this.headerHeight+'px">',e[h++]="</div>",e[h++]='<div id="mtgHBM'+g+'" class="my-tablegrid-menu">',e[h++]="<ul>",e[h++]='<li id="sort-asc'+g+'">',e[h++]='<span class="item-icon sort-ascending-icon">&nbsp;</span>',e[h++]=i18n.getMessage("label.sortAsc"),e[h++]="</li>",e[h++]='<li id="sort-desc'+g+'">',e[h++]='<span class="item-icon sort-descending-icon">&nbsp;</span>',e[h++]=i18n.getMessage("label.sortDesc"),e[h++]="</li>",e[h++]='<li class="select-all">',e[h++]='<label><div class="my-checkbox item-checkbox"><div></div><input type="checkbox" id="select-all'+g+'"></div></label>',e[h++]=i18n.getMessage("label.selectAll"),e[h++]="</li>",e[h++]="</ul>",e[h++]="</div>",e[h++]='<div id="resizeMarkerLeft'+g+'" class="resize-marker">',e[h++]="</div>",e[h++]='<div id="resizeMarkerRight'+g+'" class="resize-marker">',e[h++]="</div>",e[h++]='<div id="mtgColMoveTop'+g+'" class="column-move-top">&nbsp;</div>',e[h++]='<div id="mtgColMoveBottom'+g+'" class="column-move-bottom">&nbsp;</div>',e[h++]='<div id="dragColumn'+g+'" class="drag-column" style="width:100px;height:18px;">',e[h++]='<span class="columnTitle">&nbsp;</span>',e[h++]='<div class="drop-no">&nbsp;</div>',e[h++]="</div>",e[h++]="</div>",e.join("")},TableGrid.prototype._createTableBody=function(a){var b,c,d,e,f,g,h,i,j,k,l;for(g=this._mtgId,k=this.renderedRowsAllowed,j=this.renderedRows,b=this.options.cellHeight,d=this.headerWidth,e=[],h=0,c=!1,0===j&&(c=!0,this.options.addLazyRenderingBehavior||(k=this.renderedRowsAllowed=a.length)),c&&(e[h++]='<table id="mtgBT'+g+'" border="0" cellspacing="0" cellpadding="0" width="'+d+'" class="tablegrid-body-table">',e[h++]="<tbody>"),i=j+k,i>a.length&&(i=a.length),this._showLoaderSpinner(),f=l=j;i>=j?i>l:l>i;f=i>=j?++l:--l)a[f]=this._fromArrayToObject(a[f]),e[h++]=this._createRow(a[f],f),j++;return c&&(e[h++]="</tbody>",e[h++]="</table>"),this.renderedRows=j,setTimeout(function(a){return function(){return a._hideLoaderSpinner()}}(this),1.5),e.join("")},TableGrid.prototype._createRow=function(row,rowIdx){var action,actionBtnTmpl,alignment,cellHeight,cellWidth,checkboxTmpl,checkedFlg,cm,columnId,display,editor,groupName,html,iCellHeight,iCellWidth,icTmpl,id,idx,j,normalEditorFlg,radioTmpl,rc,rs,selectAllFlg,selectable,tdTmpl,temp,trueVal,type,_i,_j,_len,_ref,_ref1;for(id=this._mtgId,tdTmpl='<td id="mtgC{id}_c{x}r{y}" height="{height}" width="{width}" style="width:{width}px;height:{height}px;display:{display}" class="cell mtgC{id} mtgC{id}_c{x} mtgR{id}_r{y}">',icTmpl='<div id="mtgIC{id}_c{x}r{y}" style="width:{width}px;height:{height}px;text-align:{align}" class="inner-cell mtgIC{id} mtgIC{id}_c{x} mtgIR{id}_r{y}">',checkboxTmpl='<label><div id="my-checkbox{id}_c{x}r{y}" class="my-checkbox {isSelectable} {checkedClass}"><div></div><input name="my-checkbox{id}_c{x}r{y}" type="checkbox" value="{value}" class="mtgInput{id}_c{x}" checked="{checked}"></div></label>',radioTmpl='<label><div id="my-radio{id}_c{x}r{y}" class="my-radio"><div></div><input name="{groupName}" type="radio" value="{value}" class="my-radio{id}_c{x}"></div></label>',actionBtnTmpl='<div id="{name}{id}_c{x}r{y}" class="mini-button" style="display:{display}"><span class="icon {iconClass}">&nbsp;</span></div>',rs=this.options.rowStyle,rc=this.options.rowClass,cellHeight=this.options.cellHeight,iCellHeight=cellHeight-6,cm=this._columnModel,html=[],idx=0,html[idx++]='<tr id="mtgRow'+id+"_r"+rowIdx+'" class="mtgRow'+id+" "+rc(rowIdx)+'" style="'+rs(rowIdx)+'">',j=_i=0,_ref=cm.length;_ref>=0?_ref>_i:_i>_ref;j=_ref>=0?++_i:--_i){if(columnId=cm[j].id,type=cm[j].type||"string",cellWidth=parseInt(cm[j].width),iCellWidth=cellWidth-6,editor=cm[j].editor||null,normalEditorFlg=!(editor instanceof TableGrid.CellCheckbox||editor instanceof TableGrid.CellRadioButton||editor instanceof Autocompleter||columnId==="actions"+id),alignment="left",display="''",cm[j].hasOwnProperty("renderer")||("number"===type?alignment="right":"boolean"===type&&(alignment="center")),cm[j].hasOwnProperty("align")&&(alignment=cm[j].align),cm[j].visible||(display="none"),html[idx++]=template(tdTmpl,{id:id,x:j,y:rowIdx,width:cellWidth,height:cellHeight,display:display}),html[idx++]=template(icTmpl,{id:id,x:j,y:rowIdx,width:iCellWidth,height:iCellHeight,align:alignment}),normalEditorFlg)cm[j].hasOwnProperty("renderer")?html[idx++]=cm[j].renderer(row[columnId],row):html[idx++]=row[columnId];else if(editor instanceof TableGrid.CellCheckbox)selectable=editor.selectable?"selectable":"",temp=template(checkboxTmpl,{id:id,x:j,y:rowIdx,value:row[columnId],isSelectable:selectable}),void 0!==editor.selectable&&editor.selectable?cm[j].selectAllFlg?(temp=temp.replace(/\{checked\}/,"checked"),temp=temp.replace(/\{checkedClass\}/,"active")):(temp=temp.replace(/checked=.*?>/,">"),temp=temp.replace(/\{checkedClass\}/,"")):(selectAllFlg=cm[j].selectAllFlg,checkedFlg=!1,trueVal=null,trueVal=null!=editor.getValueOf?editor.getValueOf(!0):eval(row[columnId]),row[columnId]===trueVal||selectAllFlg?(temp=temp.replace(/\{checked\}/,"checked"),temp=temp.replace(/\{checkedClass\}/,"active")):(temp=temp.replace(/checked=.*?>/,">"),temp=temp.replace(/\{checkedClass\}/,""))),html[idx++]=temp;else if(editor instanceof TableGrid.CellRadioButton)groupName=null!=editor.groupName?editor.groupName:"my-radio"+id+"_c"+j,editor.groupByRow&&(groupName+=rowIdx),html[idx++]=template(radioTmpl,{id:id,x:j,y:rowIdx,value:row[columnId],groupName:groupName});else if(editor instanceof Autocompleter)html[idx++]=row[columnId];else if(columnId==="actions"+id)for(_ref1=this.options.actionsColumnToolbar,_j=0,_len=_ref1.length;_len>_j;_j++)action=_ref1[_j],action.id=id,action.x=j,action.y=rowIdx,action.display=action.visible?"":"none",html[idx++]=template(actionBtnTmpl,action);html[idx++]="</div>",html[idx++]="</td>"}return html[idx++]="</tr>",html.join("")},TableGrid.prototype._toggleLoadingOverlay=function(a){var b,c;return null==a&&(a=!0),b=this._mtgId,c=$("#overlayDiv"+b),"hidden"===c.css("visibility")?(this._hideMenus(),c.css("visibility","visible")):c.css("visibility","hidden"),a?c.find(".loading-box").show():c.find(".loading-box").hide()},TableGrid.prototype._applyCellCallbacks=function(){var a,b;return a=this._columnModel,b=this._mtgId,this.bodyTable.delegate("td div.my-checkbox","mousedown",function(b){return function(c,d){var e,f,g,h,i,j,k,l,m;return null==d&&(d={fromKeyboard:!1}),f=$(c.target),f.is(".my-checkbox")||(f=f.parent(".my-checkbox")),h=f.attr("id"),e=h.match(/_c(\d+.?)r(\-?\d+.?)/),l=parseInt(e[1]),m=parseInt(e[2]),g=a[l].editor,!a[l].editable||"function"==typeof a[l].editable&&!a[l].editable(l,m)?(c.preventDefault(),!1):(i=$("input",f),j=i.is(":checked"),j?(f.removeClass("active"),d.fromKeyboard&&i.removeAttr("checked")):(f.addClass("active"),d.fromKeyboard&&i.attr("checked","checked")),f.is(".selectable")||(k=!j,null!=g.getValueOf&&(k=g.getValueOf(!j)),b.setValueAt(k,l,m,!1),m>=0&&-1===b.modifiedRows.indexOf(m)&&b.modifiedRows.push(m),0>m||m>=b.rows.length||f.parent("div").addClass("modified-cell")),null!=g.onClick&&g.onClick(f.val(),f.is(":checked")),!0)}}(this)),this.bodyTable.delegate("td div.my-radio","mousedown",function(a){return function(b,c){var d,e,f,g,h,i;return null==c&&(c={fromKeyboard:!1}),e=$(b.target),e.is(".my-radio")||(e=e.parent(".my-radio")),g=$("input",e).attr("name"),$("input[name="+g+"]",a.bodyTable).parent("div").removeClass("active"),e.addClass("active"),c.fromKeyboard&&$("input",e).attr("checked","checked"),f=e.attr("id"),d=f.match(/_c(\d+.?)r(\-?\d+.?)/),h=parseInt(d[1]),i=parseInt(d[2]),!0}}(this)),this.bodyTable.delegate("td div.mini-button","click",function(a){return function(c){var d,e,f,g,h,i,j,k,l,m;d=a._actionsColumnToolbar,f=$(c.target).closest(".mini-button"),g=f.attr("id"),i=g.match(/([A-Za-z\-_]*?)\d+?_c(\d+.?)r(\-?\d+.?)/),h=i[1],k=parseInt(i[2]),l=parseInt(i[3]),j=!0,m=function(a){return null!=d[a].hide&&null!=d[a].show&&(d[a].previousRow={},d[a].previousRow.hide=d[a].hide,d[a].previousRow.show=d[a].show),d[a].hide=function(){return $("#"+a+b+"_c"+k+"r"+l).hide()},d[a].show=function(){return $("#"+a+b+"_c"+k+"r"+l).show()}};for(e in d)m(e);return null!=d[h].beforeClick&&(j=d[h].beforeClick(l,d)),void 0===j&&(j=!0),j&&null!=d[h].onClick&&(j=d[h].onClick(l,d)),void 0===j&&(j=!0),j&&null!=d[h].afterClick&&(j=d[h].afterClick(l,d)),!0}}(this))},TableGrid.prototype.getId=function(){return this._mtgId},TableGrid.prototype._showLoaderSpinner=function(){var a;return a=this._mtgId,$("#loader-icon"+a).show()},TableGrid.prototype._hideLoaderSpinner=function(){var a;return a=this._mtgId,$("#loader-icon"+a).hide()},TableGrid.prototype._hideMenus=function(){var a;return a=this._mtgId,$("#mtgHB"+a).css("visibility","hidden"),$("#mtgHBM"+a).css("visibility","hidden"),$("#mtgSM"+a).css("visibility","hidden")},TableGrid.prototype._createSettingMenu=function(){var a,b,c,d,e,f,g,h,i;for(f=this._mtgId,c=this._columnModel,a=this.bodyHeight+30,d=25*c.length>a?a:0,e=[],g=0,d>0?e[g++]='<div id="mtgSM'+f+'" class="my-tablegrid-menu" style="height:'+d+'px">':e[g++]='<div id="mtgSM'+f+'" class="my-tablegrid-menu">',e[g++]="<ul>",h=0,i=c.length;i>h;h++)b=c[h],e[g++]="<li>",b.visible?e[g++]='<label><div class="my-checkbox active item-checkbox"><div></div><input id="'+b.id+'" type="checkbox" checked="checked"></div></label>':e[g++]='<label><div class="my-checkbox item-checkbox"><input id="'+b.id+'" type="checkbox"></div></label>',e[g++]="&nbsp;"+b.title,e[g++]="</li>";return e[g++]="</ul>",e[g++]="</div>",e.join("")},TableGrid.prototype._applySettingMenuBehavior=function(){var a,b,c,d,e,f;return b=this._mtgId,a=this._columnModel,e=$("#mtgSM"+b),d=$("#mtgSB"+b),f=e.width(),d.on("click",function(){var a,b;return"hidden"===e.css("visibility")?(b=d.position().top,a=d.position().left,e.css({top:b+16+"px",left:a-f+16+"px",visibility:"visible"})):e.css("visibility","hidden")}),c=!1,e.on("mouseenter",function(){return c=!0}),e.on("mouseleave",function(a){return c=!1,setTimeout(function(){return c?void 0:e.css("visibility","hidden")},500)}),$("#mtgSM"+b+" :checkbox").on("click",function(a){return function(b){var c;return c=$(b.target),c.parent("div").toggleClass("active"),a._toggleColumnVisibility(c.attr("id"))}}(this))},TableGrid.prototype._syncScroll=function(){var a,b,c,d,e,f,g;return e=this._mtgId,f=this.keys,a=this.bodyDiv,c=this.headerRowDiv,b=this.bodyTable,g=this.renderedRows,this.scrollLeft=a.scrollLeft(),c.scrollLeft(a.scrollLeft()),this.scrollTop=a.scrollTop(),$("#mtgHB"+e).css("visibility","hidden"),g<this.rows.length&&b.height()-a.scrollTop()-10<a[0].clientHeight?(d=this._createTableBody(this.rows),b.find("tbody").append(d)):void 0},TableGrid.prototype._makeAllColumnsResizable=function(){var a,b,c,d,e,f;return c=this._mtgId,b=this.headerHeight,e=this.scrollBarWidth,a=null,f=0,this.options.title&&(f+=this.titleHeight),this.options.toolbar&&(f+=this.toolbarHeight),d=0,$(".mtgHS"+c).on("mousemove",function(c){return function(e){var g;return g=$(e.target),a=g.parent("th"),a?(d=a.position().left-c.scrollLeft,d+=a.outerWidth()-1,c.resizeMarkerRight.css({height:c.bodyHeight+b+"px",top:f+2+"px",left:d+"px"})):void 0}}(this)),this.resizeMarkerRight.on("draginit",function(c){return function(g,h){var i;return h.horizontal(),i=c.bodyHeight+b+2,c._hasHScrollBar()&&(i=i-e+1),c.resizeMarkerRight.css({height:i+"px","background-color":"dimgray"}),d=a.position().left-c.scrollLeft,c.resizeMarkerLeft.css({height:i+"px",top:f+2+"px",left:d+"px","background-color":"dimgray"})}}(this)),this.resizeMarkerRight.on("dragend",function(b){return function(c,d){var e;return e=b.resizeMarkerRight.position().left-b.resizeMarkerLeft.position().left,e>0&&a&&b._resizeColumn(a,e),b.resizeMarkerLeft.css({"background-color":"transparent",left:"0"}),b.resizeMarkerRight.css("background-color","transparent")}}(this))},TableGrid.prototype._resizeColumn=function(a,b){var c,d,e,f,g,h,i,j,k;return g=this._mtgId,c=this._columnModel,h=a.attr("id").match(/c(\d*)/)[1],k=a.width(),f=c[h].editor,a.attr("width",b),a.css("width",b+"px"),$(".inner-header-cell",a).css("width",b-8+"px"),$(".mtgC"+g+"_c"+h).attr("width",b),$(".mtgC"+g+"_c"+h).css("width",b+"px"),this.editRowFlg?($(".mtgIC"+g+"_c"+h).not("#mtgIC"+g+"_c"+h+"r"+this.editRowIdx).css("width",b-6+"px"),$("#mtgIC"+g+"_c"+h+"r"+this.editRowIdx).css("width",b+"px"),i=$("input[type=text]","#mtgIC"+g+"_c"+h+"r"+this.editRowIdx),j=i.width()+(b-k),i.css("width",j+"px"),d=i.closest("div"),e=d.width()+(b-k),d.css("width",e+"px")):$(".mtgIC"+g+"_c"+h).css("width",b-6+"px"),this.headerWidth=this.headerWidth-(k-b),$("#mtgHRB"+g).css("width",this.headerWidth+21+"px"),$("#mtgHRT"+g).css("width",this.headerWidth+21+"px"),$("#mtgHRT"+g).attr("width",this.headerWidth+21),$("#mtgBT"+g).attr("width",this.headerWidth),$("#mtgBT"+g).css("width",this.headerWidth+"px"),this._columnModel[h].width=b,this._syncScroll()},TableGrid.prototype._hasHScrollBar=function(){return this.headerWidth+20>this.tableWidth},TableGrid.prototype._scrollToRow=function(a){var b,c,d,e;if(!this.options.addLazyRenderingBehavior)return c=this.options.cellHeight,b=this.bodyHeight,d=this.scrollBarWidth,e=a*(c+1),e>b-d-3?this.bodyDiv.scrollTop(this.scrollTop=e):void 0},TableGrid.prototype._makeAllColumnDraggable=function(){var a,b,c,d;return c=this._mtgId,d=0,a=-1,null!=this.options.title&&(d+=this.titleHeight),null!=this.options.toolbar&&(d+=this.toolbarHeight),b=$("#dragColumn"+c),$(".mtgIHC"+c).on("mouseenter",function(a){return function(c){var e,f;return(e=$(c.target))?(f=e.parent("th").position().left,b.css({top:d+15+"px",left:f-a.scrollLeft+15+"px"})):void 0}}(this)),$(".mtgIHC"+c).on("draginit",function(c){return function(c,d){var e;return(e=$(c.target))?(a=parseInt(e.attr("id").match(/c(\d*)/)[1]),b.find("span").html(e.text()).end().css("visibility","visible"),d.representative(b,b.width()/2,10)):void 0}}(this)),$(".mtgIHC"+c).on("dragmove",function(c){return function(d,e){var f,g;return f=b.position().left,g=b.width(),c._detectDroppablePosition(f+g/2,g,b,a)}}(this)),$(".mtgIHC"+c).on("dragend",function(c){return function(d,e){return b.css("visibility","hidden"),c.colMoveTopDiv.css("visibility","hidden"),c.colMoveBottomDiv.css("visibility","hidden"),a>=0&&c.targetColumnId>=0?(c._moveColumn(a,c.targetColumnId),a=-1):void 0}}(this))},TableGrid.prototype._detectDroppablePosition=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;for(k=-5,null!=this.options.title&&(k+=this.headerHeight),null!=this.options.toolbar&&(k+=this.headerHeight),j=0,e=this._columnModel,i=this.scrollLeft,g=this.colMoveTopDiv,f=this.colMoveBottomDiv,n=[],h=l=0,m=e.length;m>=0?m>l:l>m;h=m>=0?++l:--l){if(e[h].visible&&(j+=parseInt(e[h].width)+2),a>j-i&&a-(j-this.scrollLeft)<b/2){g.css({top:k+"px",left:j-i-4+"px",visibility:"visible"}),f.css({top:k+34+"px",left:j-i-4+"px",visibility:"visible"}),this.targetColumnId=h,c.find("div").attr("class",h!==d?"drop-yes":"drop-no");break}g.css("visibility","hidden"),f.css("visibility","hidden"),this.targetColumnId=null,n.push(c.find("div").attr("class","drop-no"))}return n},TableGrid.prototype._moveColumn=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(null!==a&&null!==b&&a!==b&&(b+1!==a||a!==this._columnModel.length(-1))){if(i=this._mtgId,e=this._columnModel,l=this.keys,r=this.renderedRows,o=this.newRowsAdded.length,$("#mtgHB"+i).css("visibility","hidden"),this._blurCellElement(l._nCurrentFocus),q=null,u=null,p=null,w=null,v=null,s=null,j=0,h=0,m=null,0===b){if(q=$("#mtgHC"+i+"_c"+a).detach(),u=$("#mtgHC"+i+"_c"+b),q.insertBefore(u),p=$(".mtgC"+i+"_c"+a).detach(),o>0)for(h=x=-o;0>=-o?0>x:x>0;h=0>=-o?++x:--x)s=$("#mtgC"+i+"_c"+b+"r"+h),$(p[h+o]).insertBefore(s);for(h=y=o,F=r+o;F>=o?F>y:y>F;h=F>=o?++y:--y)s=$("#mtgC"+i+"_c"+b+"r"+(h-o)),$(p[h]).insertBefore(s)}else if(b>0&&b<e.length-1){if(q=$("#mtgHC"+i+"_c"+a).detach(),v=b+1,v===a&&v--,u=$("#mtgHC"+i+"_c"+v),q.insertBefore(u),p=$(".mtgC"+i+"_c"+a).detach(),o>0)for(h=z=-o;0>=-o?0>z:z>0;h=0>=-o?++z:--z)s=$("#mtgC"+i+"_c"+v(NaN+h)),$(p[h+o]).insertBefore(s);for(h=A=o,G=r+o;G>=o?G>A:A>G;h=G>=o?++A:--A)s=$("#mtgC"+i+"_c"+v+"r"+(h-o)),$(p[h]).insertBefore(s)}else if(b===e.length-1){if(n=$("#mtgHC"+i+"_c"+a).parent("tr").find("th:last"),q=$("#mtgHC"+i+"_c"+a).detach(),q.insertBefore(n),p=$(".mtgC"+i+"_c"+a).detach(),o>0)for(h=B=-o;0>=-o?0>B:B>0;h=0>=-o?++B:--B)w=$("#mtgRow"+i+"_r"+h),w.append(p[h+o]);for(h=C=o,H=r+o;H>=o?H>C:C>H;h=H>=o?++C:--C)w=$("#mtgRow"+i+"_r"+(h-o)),w.append(p[h])}for(g=e.length,f=e[a],e[a]=null,e=$.map(e,function(a){return null!=a?a:void 0}),c=[],k=0,t=b,b>0&&a>b&&t++,t===a&&t--,d=D=0;g>=0?g>D:D>g;d=g>=0?++D:--D)d===t&&(c[k++]=f),g-1>d&&(c[k++]=e[d]);for(this.keys._cm=this._columnModel=e=c,$("#mtgHRT"+i+" th").each(function(a,b){var c,d,f;if(a<e.length){$(b).attr("id","mtgHC"+i+"_c"+a);try{return d=$(b).find("div.inner-header-cell"),d.attr("id","mtgIHC"+i+"_c"+a),d.find("span").attr("id","mtgSortIcon"+i+"_c"+a),c=$(b).find("div.header-separator"),c.attr("id","mtgHS"+i+"_c"+a)}catch(g){f=g}}}),h=E=-o;r>=-o?r>E:E>r;h=r>=-o?++E:--E)$(".mtgR"+i+"_r"+h).each(function(a){return $(this).attr("id","mtgC"+i+"_c"+a+"r"+h),$(this).attr("class","cell mtgC"+i+" mtgC"+i+"_c"+a+" mtgR"+i+"_r"+h)}),$(".mtgIR"+i+"_r"+h).each(function(a,b){var c,d;return $(b).attr("id","mtgIC"+i+"_c"+a+"r"+h),d=$(b).attr("class").match(/modified-cell/)?" modified-cell":"",$(b).attr("class","inner-cell mtgIC"+i+" mtgIC"+i+"_c"+a+" mtgIR"+i+"_r"+h+d),$(b).find("input").size()>0?(c=$(b).find("input"),c.attr("id","mtgInput"+i+"_c"+a+"r"+h),c.attr("name","mtgInput"+i+"_c"+a+"r"+h),c.attr("class","mtgInput"+i+"_c"+a)):void 0});return a===this.sortedColumnIndex?this.sortedColumnIndex=b:void 0}},TableGrid.prototype._addKeyBehavior=function(){var a,b,c,d,e,f,g,h;for(b=this._columnModel,e=this.rows,d=this.newRowsAdded,c=this.keys,h=[],f=0,g=b.length;g>f;f++)a=b[f],h.push(function(a){return function(b){var d,e,f,g;return b.editable&&(d=function(c){var d,e,f;if(!a.editRowFlg&&("function"!=typeof b.editable||(f=a.getCurrentPosition(),d=f[0],e=f[1],b.editable(d,e))))return null===a.editedCellId||a.editedCellId!==c.attr("id")?(a.editedCellId=c.attr("id"),a._editCellElement(c)):a._blurCellElement(c)?a.editedCellId=null:void 0},c.events.action(b,d),f=function(b){return a.editRowFlg?void 0:a._blurCellElement(b)?a.editedCellId=null:void 0},c.events.esc(b,f),e=function(c){var d,e,f,g;if(!a.editRowFlg)return a._blurCellElement(c)&&(a.editedCellId=null),g=a.getCurrentPosition(),e=g[0],f=g[1],d=a.getRow(f),null!=a.options.onCellBlur?a.options.onCellBlur(c,e,f,d,b.id):void 0},c.events.blur(b,e)),g=function(c){var d,e;if(!a.editRowFlg)return d=a.getCurrentPosition(),e=a.getRow(d[1]),null!=a.options.onCellFocus?a.options.onCellFocus(c,d[0],d[1],e,b.id):void 0},c.events.focus(b,g)}}(this)(a));return h},TableGrid.prototype._editCellElement=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==b&&(b=!1),!a.is(":has(.mini-button)"))if(this.keys._isInputFocusedFlg=!0,h=this._mtgId,c=this._columnModel,d=this.keys.getCoordsFromCell(a),o=d[0],p=d[1],n=a.width(),g=a.height(),i=a.find("div"),m=this.getValueAt(o,p),f=this._columnModel[o].editor,j=null,l=!(f instanceof TableGrid.CellCheckbox||f instanceof TableGrid.CellRadioButton)){if(a.css("height",this.options.cellHeight+"px"),i.css({position:"relative",width:n+"px",height:g+"px",padding:"0",border:"0",margin:"0"}),i.html(""),f instanceof Autocompleter&&c[o].renderer&&(m=c[o].renderer(m,f.getItems(),this.getRow(p))),k="mtgInput"+h+"_c"+o+"r"+p,j=$("<input>").attr({id:k,type:"text",value:m}),j.addClass("tablegrid-textfield"),j.css({padding:"3px",width:n+"px"}),i.append(j),f.setTableGrid(this),f.render(j,!0),f.validate&&f.validate(),f instanceof DatePicker&&(f._tableGrid=this),!b)return j.focus(),j.select()}else if(!this.editRowFlg)return e=$(".my-checkbox, .my-radio",i),e.trigger("mousedown",{fromKeyboard:!0}),this.editedCellId=null,this.keys._isInputFocusedFlg=!1},TableGrid.prototype._blurCellElement=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return null==b&&(b=!1),!b&&!this.keys._isInputFocusedFlg||b&&!this.editRowFlg||a.is(":has(.mini-button)")?void 0:(j=this._mtgId,o=this.keys,e=this._columnModel,r=a.width(),i=a.height(),g=this.keys.getCoordsFromCell(a),s=g[0],t=g[1],d=this.cellHeight,l="#mtgIC"+j+"_c"+s+"r"+t,m=$("#mtgInput"+j+"_c"+s+"r"+t),k=$(l),q=m.val(),h=e[s].editor||"input",p=e[s].type||"string",f=e[s].id,c="number"===p?"right":"left",null!=e[s].align&&(c=e[s].align),n=!(h instanceof TableGrid.CellCheckbox||h instanceof TableGrid.CellRadioButton),n&&(null!=h.hide&&h.hide(),null!=h.reset&&h.reset(),a.css("height",d+"px"),k.css({width:r-6+"px",height:i-6+"px",padding:"3px","text-align":c}).html(q),t>=0&&t<this.rows.length&&this.rows[t][f]!==q?(n||!h.selectable)&&(this.rows[t][f]=q,k.addClass("modified-cell"),-1===this.modifiedRows.indexOf(t)&&this.modifiedRows.push(t)):0>t?this.newRowsAdded[Math.abs(t)-1][f]=q:t>=this.rows.length&&(this.newRowsAdded[Math.abs(t)-this.rows.length][f]=q)),null!=h.afterUpdateCallback&&h.afterUpdateCallback(a,q),o._isInputFocusedFlg=!1,!0)},TableGrid.prototype._applyHeaderButtons=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;return h=this._mtgId,a=this._columnModel,g=this.headerHeight,e=$("#mtgHB"+h),f=$("#mtgHBM"+h),j=$("#sort-asc"+h),k=$("#sort-desc"+h),b=-1,c=null,l=!0,d=null,m=g,null!=this.options.title&&(m+=this.titleHeight),null!=this.options.toolbar&&(m+=this.toolbarHeight),$(".mtgIHC"+h).on("mouseenter",function(f){return function(g){var h,i,n,o;if(h=$(g.target),h.attr("id")&&(i=h.attr("id"),b=parseInt(i.match(/_c(\d*)/)[1]),c=a[b].editor,l=a[b].sortable,d=a[b].height,l||c instanceof TableGrid.CellCheckbox)){if(n=h.parent("th"),!n)return;return o=n.position().left+n.outerWidth(),o=o-16-f.scrollLeft,o<f.bodyDiv[0].clientWidth&&e.css({top:m+4-d+"px",left:o+"px",height:d-1+"px",visibility:"visible"}),j.on("click",function(){try{if(f._sortingDataFlg)return;return f._sortingDataFlg=!0,f._sortData(b,"ASC")}finally{f._sortingDataFlg=!1}}),k.on("click",function(){try{if(f._sortingDataFlg)return;return f._sortingDataFlg=!0,f._sortData(b,"DESC")}finally{f._sortingDataFlg=!1;
}})}}}(this)),$(".mtgIHC"+h).on("mousedown",function(a){return function(c){var d,e;try{if(a._sortingDataFlg)return;if(a._sortingDataFlg=!0,d=$(c.target),!d.attr("id"))return;return e=d.attr("id"),b=parseInt(e.match(/_c(\d*)/)[1]),a._toggleSortData(b)}finally{a._sortingDataFlg=!1}}}(this)),e.on("mousedown",function(d){return function(){var g,i,j,k;if(!(0>b))return a=d._columnModel,c=a[b].editor,k=!1,"hidden"===f.css("visibility")?(a[b].sortable?($("#sort-desc"+h).show(),$("#sort-asc"+h).show()):($("#sort-desc"+h).hide(),$("#sort-asc"+h).hide()),k=c instanceof TableGrid.CellCheckbox,j=$("#mtgHBM"+h+" .select-all:first"),k?(j.show(),g=!1,a[b].selectAllFlg?($("input",j).attr("checked","checked"),$(".my-checkbox",j).addClass("active"),g=!1):($("input",j).removeAttr("checked","checked"),$(".my-checkbox",j).removeClass("active"),g=!0),j.one("click",function(){var c,e,i,k,l,m;for(g?($(".my-checkbox",j).addClass("active"),$("input",j).attr("checked","checked")):($(".my-checkbox",j).removeClass("active"),$("input",j).removeAttr("checked","checked")),a[b].selectAllFlg=g,e=d.renderedRows,c=0,d.newRowsAdded.length>0&&(c=-d.newRowsAdded.length),k=b,l=m=c;e>=c?e>m:m>e;l=e>=c?++m:--m)i=$("#my-checkbox"+h+"_c"+k+"r"+l),i.trigger("mousedown",{fromKeyboard:!0});return f.css("visibility","hidden")})):j.hide(),i=parseInt(e.css("left")),f.css({top:m+2+"px",left:i+"px",visibility:"visible"})):f.css("visibility","hidden")}}(this)),i=!1,f.on("mouseenter",function(){return i=!0}),f.on("mouseleave",function(a){return i=!1,setTimeout(function(){return i?void 0:f.css("visibility","hidden")},500)})},TableGrid.prototype._sortData=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(c=this._columnModel,c[a].sortable){if(g=this._mtgId,$("#mtgSortIcon"+g+"_c"+a).attr("class","ASC"===b?"tablegrid-sort-asc-icon":"tablegrid-sort-desc-icon"),$("#mtgSortIcon"+g+"_c"+this.sortedColumnIndex).css("visibility","hidden"),$("#mtgIHC"+g+"_c"+this.sortedColumnIndex).css("color","dimgray"),$("#mtgSortIcon"+g+"_c"+a).css("visibility","visible"),$("#mtgIHC"+g+"_c"+a).css("color","black"),this.url&&!this.options.sortInMemory)this.request[this.options.sortColumnParameter]=c[a].id,this.request[this.options.ascDescFlagParameter]=b,this._retrieveDataFromUrl(1);else if(this.rows&&this.rows.length>0){for(d=this.getColumnValues(c[a].id,!1),e={},l=null,f=0,m=0,p=d.length;p>m;m++)l=d[m],void 0===e[l]&&(e[l]=[]),e[l].push(f++);for(d=arrayUtil.unique(d),d=d.sort(),"DESC"===b&&(d=d.reverse()),j=[],k=this.rows,i=null,h=null,n=0,q=d.length;q>n;n++)for(l=d[n],i=e[l],o=0,r=i.length;r>o;o++)h=i[o],j.push(k[h]);this.rows=j,this.renderedRows=0,this.innerBodyDiv.html(this._createTableBody(this.rows)),this.pager&&this.pagerDiv.html(this._updatePagerInfo()),this.bodyDiv.scrollTop(this.scrollTop=0),this.bodyDiv.trigger("dom:dataLoaded")}return this.sortedColumnIndex=a,c[a].sortedAscDescFlg=b}},TableGrid.prototype._toggleSortData=function(a){var b;return b=this._columnModel,"DESC"===b[a].sortedAscDescFlg?this._sortData(a,"ASC"):this._sortData(a,"DESC")},TableGrid.prototype._toggleColumnVisibility=function(a){var b,c,d,e,f,g,h,i,j,k;for(f=this._mtgId,c=this._columnModel,this._blurCellElement(this.keys._nCurrentFocus),d=$("#mtgHRT"+f),b=$("#mtgBT"+f),g=-1,e=j=0,k=c.length;k>=0?k>j:j>k;e=k>=0?++j:--j)c[e].id===a&&(g=e);return h=$("#mtgHC"+f+"_c"+g),$("#mtgHB"+f).css("visibility","hidden"),i=0,c[g].visible?(i=h.width(),h.hide(),$(".mtgC"+f+"_c"+g).hide(),c[g].visible=!1,this.headerWidth=this.headerWidth-i):(h.show(),i=h.width()+2,$(".mtgC"+f+"_c"+g).show(),c[g].visible=!0,this.headerWidth=this.headerWidth+i),d.attr("width",this.headerWidth+21),d.css("width",this.headerWidth+21+"px"),b.attr("width",this.headerWidth),b.css("width",this.headerWidth+"px")},TableGrid.prototype._fullPadding=function(a,b){var c,d;return d=parseInt(a.css("padding-"+b)),d=isNaN(d)?0:d,c=parseInt(a.css("border-"+b+"-width")),c=isNaN(c)?0:c,d+c},TableGrid.prototype._retrieveDataFromUrl=function(a){var b,c,d,e,f;if(null==this.options.onPageChange||this.options.onPageChange()){for(c="page",null!==this.pager&&this.pager.pageParameter&&(c=this.pager.pageParameter),this.request[c]=a,this._toggleLoadingOverlay(),f=this._columnModel,d=0,e=f.length;e>d;d++)b=f[d],b.selectAllFlg=!1;return $.ajax({url:this.url,data:this.request,dataType:"json",cache:!1,complete:function(a){return function(b){var d,e;e=$.parseJSON(b.responseText);try{if(a.rows=e.rows||[],a.pager=null,null!=e.options&&null!=e.options.pager&&(a.pager=e.options.pager),null==a.pager&&(a.pager={}),a.pager.pageParameter=c,a.renderedRows=0,a.innerBodyDiv.html(a._createTableBody(e.rows)),a.bodyTable=$("#mtgBT"+a._mtgId),null!=a.pager&&(a.pagerDiv.html(a._updatePagerInfo()),a._addPagerBehavior()),null!=a.options.afterRender)return a.options.afterRender()}catch(f){if(d=f,null!=a.options.onFailure)return a.options.onFailure(b)}finally{a._toggleLoadingOverlay(),a.bodyDiv.scrollTop(a.scrollTop=0),a.bodyDiv.trigger("dom:dataLoaded")}}}(this),fail:function(a){return null!=this.options.onFailure&&this.options.onFailure(a),this._toggleLoadingOverlay(),this.bodyDiv.scrollTop(this.scrollTop=0),this.bodyDiv.trigger("dom:dataLoaded")}})}},TableGrid.prototype._updatePagerInfo=function(a){var b,c,d,e,f,g;return c=this._mtgId,a?'<span id="loader-icon'+c+'" class="loader-icon">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>':(b=[],d=0,f=this.pager,this.pager.total>0?(g=i18n.getMessage("message.totalDisplay",{total:f.total}),f.from&&f.to&&(g+=i18n.getMessage("message.rowsDisplay",{from:f.from,to:f.to})),b[d++]='<span class="tablegrid-pager-message">'+g+"</span>",null!=f.pages?(e='<input type="text" name="mtgPageInput'+c+'" id="mtgPageInput'+c+'" value="'+f.currentPage+'" class="tablegrid-page-input" size="3" maxlength="3">',g=i18n.getMessage("message.pagePrompt",{id:c,pages:f.pages,input:e}),b[d++]='<table class="tablegrid-pager-table" border="0" cellpadding="0" cellspacing="0">',b[d++]="<tbody>",b[d++]="<tr>",b[d++]='<td><div id="loader-icon'+c+'" class="loader-icon">&nbsp;</div></td>',b[d++]='<td><div class="separator">&nbsp;</div></td>',b[d++]=g,b[d++]='<td><div class="separator">&nbsp;</div></td>',b[d++]='<td><a id="mtgPrev'+c+'" class="tablegrid-pager-control"><div class="mini-button"><span class="icon previous-page">&nbsp;</span></div></a></td>',b[d++]='<td><a id="mtgNext'+c+'" class="tablegrid-pager-control"><div class="mini-button"><span class="icon next-page">&nbsp;</span></div></a></td>',b[d++]="</tr>",b[d++]="</tbody>",b[d++]="</table>",b[d++]='<div id="my-first-last-menu'+c+'" class="my-tablegrid-pager-menu">',b[d++]="<ul>",b[d++]='<li id="mtgFirst'+c+'">',b[d++]=i18n.getMessage("label.first"),b[d++]="</li>",b[d++]='<li id="mtgLast'+c+'">',b[d++]=i18n.getMessage("label.last"),b[d++]="</li>",b[d++]="</ul>",b[d++]="</div>"):(b[d++]='<table class="tablegrid-pager-table" border="0" cellpadding="0" cellspacing="0">',b[d++]="<tbody>",b[d++]="<tr>",b[d++]='<td><div id="loader-icon'+c+'" class="loader-icon">&nbsp;</div></td>',b[d++]="</tr>",b[d++]="</tbody>",b[d++]="</table>")):b[d++]='<span class="tablegrid-pager-message">'+i18n.getMessage("message.noRecordFound")+"</span>",b.join(""))},TableGrid.prototype._addPagerBehavior=function(){var a,b,c,d;return b=this._mtgId,!this.pager.pages||(a=this.pager.currentPage,c=this.pager.pages,d=this.pager.total,0>=d)?void 0:(c>0&&($("#my-page-label"+b).append($("#my-first-last-menu"+b)),$("#my-first-last-menu"+b).css("margin-top","3px"),$("#my-page-label"+b).hover(function(){return $("#my-first-last-menu"+b).css("visibility","visible")},function(){return $("#my-first-last-menu"+b).css("visibility","hidden")})),a>1&&$("#mtgFirst"+b).on("click",function(a){return function(){return a._retrieveDataFromUrl(1)}}(this)),a>0&&c>a?($("span","#mtgNext"+b).css("opacity","1"),$("#mtgNext"+b).on("click",function(b){return function(){return b._retrieveDataFromUrl(parseInt(a)+1)}}(this))):$("span","#mtgNext"+b).css("opacity","0.5"),a>1&&c>=a?($("span","#mtgPrev"+b).css("opacity","1"),$("#mtgPrev"+b).on("click",function(b){return function(){return b._retrieveDataFromUrl(parseInt(a)-1)}}(this))):$("span","#mtgPrev"+b).css("opacity","0.5"),c>a&&$("#mtgLast"+b).on("click",function(a){return function(){return a._retrieveDataFromUrl(a.pager.pages)}}(this)),$("#mtgPageInput"+b).on("keydown",function(a){return function(d){var e;return d.which===eventUtil.KEY_RETURN?(e=$("#mtgPageInput"+b).val(),e>c&&(e=c),1>e&&(e="1"),$("#mtgPageInput"+b).val(e),a._retrieveDataFromUrl(e)):void 0}}(this)))},TableGrid.prototype.resize=function(){var a,b,c,d,e,f,g,h;return f=$(this.target),h=this.options.width||f.width()-this._fullPadding(f,"left")-this._fullPadding(f,"right")+"px",b=this.options.height||f.height()-this._fullPadding(f,"top")-this._fullPadding(f,"bottom")+"px",this.tableWidth=parseInt(h)-2,e=!1,parseInt(b)-2>this.tableHeight&&(e=!0),this.tableHeight=parseInt(b)-2,a=$("#mtgHB"+this._mtgId),a&&a.css("visibility","hidden"),this.tableDiv.css({width:this.tableWidth+"px",height:this.tableHeight+"px"}),this.headerTitle&&this.headerTitle.css("width",this.tableWidth-6+"px"),this.headerToolbar&&this.headerToolbar.css("width",this.tableWidth-4+"px"),this.headerRowDiv.css("width",this.tableWidth+"px"),this.overlayDiv.css("width",this.tableWidth+2+"px"),d=$("#mtgSB"+this._mtgId),d&&d.css("left",this.tableWidth-20+"px"),this.bodyHeight=this.tableHeight-this.headerHeight-3,this.options.title&&(this.bodyHeight=this.bodyHeight-this.titleHeight-1),this.overlayDiv.css("height",this.bodyHeight+4+"px"),this.options.pager&&(this.bodyHeight=this.bodyHeight-this.pagerHeight),this.options.toolbar&&(this.bodyHeight=this.bodyHeight-this.pagerHeight),this.bodyDiv.css({width:this.tableWidth+"px",height:this.bodyHeight+"px"}),this.innerBodyDiv.css("width",this.tableWidth-this.scrollBarWidth+"px"),this.options.pager&&(g=this.bodyHeight+this.headerHeight+5,this.options.title&&(g+=this.titleHeight),this.options.toolbar&&(g+=this.toolbarHeight),this.pagerDiv.css({top:g+"px",width:this.tableWidth-4+"px"})),this.renderedRowsAllowed=Math.floor(this.bodyDiv[0].clientHeight/this.options.cellHeight),e?(c=this._createTableBody(this.rows),this.bodyTable.find("tbody").append(c)):void 0},TableGrid.prototype.getValueAt=function(a,b){var c,d,e,f;return f=null,c=this._columnModel[a].id,e=this.rows,d=this.newRowsAdded,b>=0&&b<e.length?f=this.rows[b][c]:0>b?f=d[Math.abs(b)-1][c]:b>=e.length&&(f=d[Math.abs(b)-e.length][c]),f},TableGrid.prototype.setValueAt=function(value,x,y,refreshValueFlg){var cm,columnId,editor,id,input,newRowsAdded,rows,trueVal;return cm=this._columnModel,id=this._mtgId,editor=cm[x].editor,columnId=cm[x].id,rows=this.rows,newRowsAdded=this.newRowsAdded,(void 0===refreshValueFlg||refreshValueFlg)&&(null!==editor&&(editor instanceof TableGrid.CellCheckbox||editor instanceof TableGrid.CellRadioButton)?(input=$("#mtgInput"+id+"_c"+x+"r"+y),null!=editor.getValueOf?(trueVal=editor.getValueOf(!0),value===trueVal?input.attr("checked",!0):(input.attr("checked",!1),value=editor.getValueOf(!1))):eval(value)?input.attr("checked",!0):(input.attr("checked",!1),value=!1)):$("#mtgIC"+id+"_c"+x+"r"+y).html(value)),y>=0&&y<rows.length?rows[y][columnId]=value:0>y?newRowsAdded[Math.abs(y)-1][columnId]=value:y>=rows.length?newRowsAdded[Math.abs(y)-rows.length][columnId]=value:void 0},TableGrid.prototype.getColumnIndex=function(a){var b,c,d,e;for(c=-1,b=d=0,e=this._columnModel.length;e>=0?e>d:d>e;b=e>=0?++d:--d)if(this._columnModel[b].id===a){c=this._columnModel[b].positionIndex;break}return c},TableGrid.prototype.getIndexOf=function(a){var b,c,d,e,f,g;for(d=-1,c=0,g=this._columnModel,e=0,f=g.length;f>e;e++){if(b=g[e],b.id===a){d=c;break}c++}return d},TableGrid.prototype.getCurrentPosition=function(){return[this.keys._xCurrentPos,this.keys._yCurrentPos]},TableGrid.prototype.getCellElementAt=function(a,b){return $("#mtgC"+this._mtgId+"_c"+a+"r"+b)},TableGrid.prototype.getModifiedRows=function(){var a,b,c,d,e,f,g;for(d=[],c=this.modifiedRows,e=this.rows,a=f=0,g=c.length;g>=0?g>f:f>g;a=g>=0?++f:--f)b=c[a],d.push(e[b]);return d},TableGrid.prototype.getNewRowsAdded=function(){return this.newRowsAdded},TableGrid.prototype.getDeletedRows=function(){return this.deletedRows},TableGrid.prototype.getSelectedRowsByColumn=function(a){var b,c,d,e,f,g,h,i,j;if(c=this.getIndexOf(a),e=[],g=this.rows,d=this.newRowsAdded,0>c)return null;for(h=this._getSelectedRowsIdx(c),b=i=0,j=h.length;j>=0?j>i:i>j;b=j>=0?++i:--i)f=h[b],f>=0&&f<g.length?e.push(g[f]):0>f?e.push(d[Math.abs(f)-1]):f>=g.length&&e.push(d[Math.abs(f)-g.length]);return e},TableGrid.prototype._getSelectedRowsIdx=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(i=[],e=this._mtgId,c=this._columnModel,g=this.newRowsAdded,h=this.renderedRows,b=this.options.addNewRowsToEndBehaviour,a=a||-1,j=!1,-1===a){for(l=0,p=c.length;p>l;l++)if(d=c[l],d.editor instanceof TableGrid.CellCheckbox||d.editor instanceof TableGrid.CellRadioButton){a=d.positionIndex,j=d.selectAllFlg;break}}else j=c[a].selectAllFlg;if(a>=0){if(f=0,k=0,g.length>0)if(b)for(f=n=0,s=g.length;s>=0?s>n:n>s;f=s>=0?++n:--n)k=f+h,$("#my-checkbox"+e+"_c"+a+"r"+k).is(".active")&&i.push(k),$("#my-radio"+e+"_c"+a+"r"+k).is(".active")&&i.push(k);else for(f=m=0,r=g.length;r>=0?r>m:m>r;f=r>=0?++m:--m)k=-(f+1),$("#my-checkbox"+e+"_c"+a+"r"+k).is(".active")&&i.push(k),$("#my-radio"+e+"_c"+a+"r"+k).is(".active")&&i.push(k);for(f=o=0;h>=0?h>o:o>h;f=h>=0?++o:--o)k=f,-1===this.deletedRows.indexOf(this.getRow(k))&&$("#my-checkbox"+e+"_c"+a+"r"+k).size()>0&&$("#my-checkbox"+e+"_c"+a+"r"+k).is(".active")&&i.push(k),-1===this.deletedRows.indexOf(this.getRow(k))&&$("#my-radio"+e+"_c"+a+"r"+k).size()>0&&$("#my-radio"+e+"_c"+a+"r"+k).is(".active")&&i.push(k);if(j&&h<this.rows.length)for(f=q=h,t=this.rows.length;t>=h?t>q:q>t;f=t>=h?++q:--q)i.push(f)}return i},TableGrid.prototype.highlightRow=function(a,b){var c,d,e,f,g;for($(".mtgRow"+this._mtgId).removeClass("focus"),d=this.getColumnIndex(a),e=-1,c=f=0,g=this.rows.length;g>=0?g>f:f>g;c=g>=0?++f:--f)if(this.rows[c][d]===b){e=c;break}return e>=0?$("#mtgRow"+this._mtgId+"_r"+e).addClass("focus"):void 0},TableGrid.prototype.getRow=function(a){var b;return b=null,a>=0&&a<this.rows.length?b=this.rows[a]:0>a?b=this.newRowsAdded[-(a+1)]:a>=this.rows.length&&(b=this.newRowsAdded[a-this.rows.length]),b},TableGrid.prototype.getColumnValues=function(a,b){var c,d,e,f,g,h,i;if(null==b&&(b=!0),e=[],d=0,c=0,b)for(c=f=0,h=this.newRowsAdded.length;h>=0?h>f:f>h;c=h>=0?++f:--f)e[d++]=this.newRowsAdded[c][a];for(c=g=0,i=this.rows.length;i>=0?i>g:g>i;c=i>=0?++g:--g)e[d++]=this.rows[c][a];return e},TableGrid.prototype.clear=function(){return this.modifiedRows=[],this.deletedRows=[],this.newRowsAdded=[]},TableGrid.prototype.addNewRow=function(a){var b,c,d,e,f,g,h,i,j;if(f=this.keys,b=this.bodyTable,c=this._columnModel,d=this.newRowsAdded.length,h=this.renderedRows,void 0===a)for(a={},e=i=0,j=c.length;j>=0?j>i:i>j;e=j>=0?++i:--i)a[c[e].id]="";return this.newRowsAdded.push(a),this.options.addNewRowsToEndBehaviour?(d=h+d,b.find("tbody").append(this._createRow(a,d)),g=h+this.newRowsAdded.length,this.keys.setNumberOfRows(g),this._scrollToRow(g)):(d=-(d+1),b.find("tbody").prepend(this._createRow(a,d)),f.setTopLimit(d),this.bodyDiv.scrollTop(this.scrollTop=0))},TableGrid.prototype.deleteRows=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(b=this._mtgId,d=this._getSelectedRowsIdx(),a=0,j=0,a=k=0,n=d.length;n>=0?n>k:k>n;a=n>=0?++k:--k)j=d[a],j>=0&&j<this.rows.length?this.deletedRows.push(this.getRow(j)):0>j?this.newRowsAdded[Math.abs(j)-1]=null:j>=this.rows.length&&(this.newRowsAdded[Math.abs(j)-this.rows.length]=null),$("#mtgRow"+b+"_r"+j).hide();for(e=[],o=this.newRowsAdded,l=0,m=o.length;m>l;l++)c=o[l],null!==c&&e.push(c);return this.newRowsAdded=e,i=$("#mtgTotal"),null!=i&&(h=parseInt(i.html()),h-=d.length,i.html(h)),g=$("#mtgTo"),null!=g&&(f=parseInt(g.html()),f-=d.length,g.html(f)),this._syncScroll()},TableGrid.prototype.editRow=function(a){var b,c,d,e,f,g,h;if(e=!0,null!=this.options.beforeEditRow&&(e=this.options.beforeEditRow(a)),e!==!1){for(this.editRowFlg&&this.saveRow(this.editRowIdx),this.editRowFlg=!0,this.editRowIdx=a,d=this._mtgId,h=$("td","#mtgRow"+d+"_r"+a),f=0,g=h.length;g>f;f++)b=h[f],this._editCellElement($(b),!0);return c=$("input[type=text]","#mtgRow"+d+"_r"+a).first(),c.focus(),c.select(),null!=this.options.afterEditRow?this.options.afterEditRow(a):void 0}},TableGrid.prototype.saveRow=function(a){var b,c,d,e,f,g;if(d=!0,null!=this.options.beforeSaveRow&&(d=this.options.beforeSaveRow(a)),d!==!1){for(c=this._mtgId,g=$("td","#mtgRow"+c+"_r"+a),e=0,f=g.length;f>e;e++)b=g[e],this._blurCellElement($(b),!0);return this.editRowFlg=!1,null!=this.options.afterSaveRow?this.options.afterSaveRow(a):void 0}},TableGrid.prototype.getActionsColumnToolbar=function(){return this._actionsColumnToolbar},TableGrid.prototype.refresh=function(){return this.modifiedRows=[],this.deletedRows=[],this.newRowsAdded=[],this._retrieveDataFromUrl(1)},TableGrid.prototype.empty=function(){return this.modifiedRows=[],this.deletedRows=[],this.newRowsAdded=[],this.rows=[],this.pager.total=0,this.renderedRows=0,this.innerBodyDiv.html(this._createTableBody(this.rows)),this.bodyTable=$("#mtgBT"+this._mtgId),this.pagerDiv.innerHTML=this._updatePagerInfo(),this.bodyDiv.trigger("dom:dataLoaded")},TableGrid.prototype._fromArrayToObject=function(a){var b,c,d,e,f;if(d=null,b=this._columnModel,a instanceof Array)for(d={},c=e=0,f=b.length;f>=0?f>e:e>f;c=f>=0?++e:--e)d[b[c].id]=a[b[c].positionIndex];else a instanceof Object&&(d=a);return d},TableGrid.prototype.getAllRows=function(){var a,b,c,d,e,f,g,h,i;for(d=[],c=this.newRowsAdded,e=this.rows,b=0,b=f=0,h=c.length;h>=0?h>f:f>h;b=h>=0?++f:--f)d.push(c[b]);for(a=this.deletedRowsIdx,b=g=0,i=e.length;i>=0?i>g:g>i;b=i>=0?++g:--g)-1===a.indexOf(b)&&d.push(e[b]);return d},TableGrid.prototype.getRowCount=function(){return this.getAllRows().length},TableGrid}(),TableGrid.CellCheckbox=function(a){function b(a){a=$.extend({onClick:null,getValueOf:null,selectable:null},a||{}),this.onClick=a.onClick,this.getValueOf=a.getValueOf,this.selectable=a.selectable}return __extends(b,a),b}(Checkbox),TableGrid.CellRadioButton=function(a){function b(a){a=$.extend({onClick:null,getValueOf:null,selectable:null,groupName:null,groupByRow:!1},a||{}),this.onClick=a.onClick,this.getValueOf=a.getValueOf,this.selectable=a.selectable,this.groupName=a.groupName}return __extends(b,a),b}(RadioButton),HeaderBuilder=function(){function a(a,b){this._columnModel=b,this._mtgId=a,this.filledPositions=[],this._leafElements=[],this.defaultHeaderColumnWidth=100,this.cellHeight=24,this.rnl=this.getHeaderRowNestedLevel(),this._validateHeaderColumns(),this.headerWidth=this.getTableHeaderWidth(),this.headerHeight=this.getTableHeaderHeight()}return a.prototype._createHeaderRow=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(t='<th id="mtgHC{id}_c{x}" colspan="{colspan}" rowspan="{rowspan}" width="{width}" height="{height}" style="width:{width}px;height:{height}px;border-bottom-color:{color};display:{display}" class="header-cell mtgHC{id}">',u='<th id="mtgHC{id}_c{x}" colspan="{colspan}" rowspan="{rowspan}" width="{width}" height="{height}" style="width:{width}px;height:{height}px;border-right:none;" class="header-cell mtgHC{id}">',l='<div id="mtgIHC{id}_c{x}" class="inner-header-cell mtgIHC{id}" style="width:{width}px;height:{height}px;">',m='<div class="inner-header-cell" style="width:{width}px;height:{height}px;">',g='<div id="mtgHS{id}_c{x}" class="header-separator mtgHS{id}" style="height:{height}px;">',r='<span id="mtgSortIcon{id}_c{x}" class="sort-icon">&nbsp;&nbsp;&nbsp;</span>',c=this._columnModel,j=this._mtgId,o=this.rnl,h=[],k=0,this.filledPositions=[],h[k++]='<table id="mtgHRT'+j+'" width="'+(this.headerWidth+21)+'" cellpadding="0" cellspacing="0" border="0" class="header-row-table">',h[k++]="<thead>",s=null,i=w=0;o>=0?o>w:w>o;i=o>=0?++w:--w){for(p=this._getHeaderRow(i),h[k++]="<tr>",v=this._getStartingPosition(),n=x=0,y=p.length;y>=0?y>x:x>y;n=y>=0?++x:--x)a=p[n],e=1,q=1,d=this._getHeaderColumnNestedLevel(a),f="",0===d?(q=o-i,a.height=q*(this.cellHeight+2),v=this._getNextIndexPosition(v),f=a.visible?"":"none",s=t,b=a.width||"80",b=parseInt(b),h[k++]=template(s,{id:j,x:v,colspan:e,rowspan:q,display:f,width:b,height:a.height,color:"#ccc"}),s=l,h[k++]=template(s,{id:j,x:v,width:b-8,height:a.height-6}),h[k++]=p[n].title,h[k++]="&nbsp;",s=r,h[k++]=template(s,{id:j,x:v}),h[k++]="</div>",s=g,h[k++]=template(s,{id:j,x:v,height:a.height}),h[k++]="&nbsp;",h[k++]="</div>",h[k++]="</th>",this.filledPositions.push(v),this._leafElements[v]=a):(e=this._getNumberOfNestedCells(a),v+=e-1,s=t.replace(/\{id\}/g,j),s=s.replace(/\{colspan\}/g,e),s=s.replace(/\{rowspan\}/g,q),s=s.replace(/id="mtgHC.*?_c\{x\}"/g,""),s=s.replace(/width="\{width\}"/g,""),s=s.replace(/width:\{width\}px;/g,""),s=s.replace(/height="\{height\}"/g,""),s=s.replace(/height:\{height\}px;/g,""),s=s.replace(/\{color\}/g,"#ddd"),s=s.replace(/\{display\}/g,f),h[k++]=s,s=l.replace(/\{id\}/g,j),s=s.replace(/id="mtgIHC.*?_c\{x\}"/g,""),s=s.replace(/width:\{width\}px;/g,""),s=s.replace(/height:\{height\}px;/g,""),h[k++]=s,h[k++]=p[n].title,h[k++]="</div>",h[k++]="</th>"),v++;0===i&&(s=u,h[k++]=template(s,{id:j,x:this.filledPositions.length,colspan:"1",rowspan:o,width:20,height:o*this.cellHeight}),s=m,h[k++]=template(s,{id:j,height:o*this.cellHeight-6,width:14}),h[k++]="&nbsp;",h[k++]="</div>",h[k++]="</th>"),h[k++]="</tr>"}return h[k++]="</thead>",h[k++]="</table>",h.join("")},a.prototype._getHeaderRow=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;if(e=this._columnModel,b=b||e,i=[],g=0,a>0){if(h=0,d=null,c){if(c.hasOwnProperty("children")&&c.children.length>0)for(d=c.children,h=l=0,o=d.length;o>=0?o>l:l>o;h=o>=0?++l:--l)i[g++]=d[h]}else for(f=j=0,m=b.length;m>=0?m>j:j>m;f=m>=0?++j:--j)if(b[f].hasOwnProperty("children")&&b[f].children.length>0)for(d=b[f].children,h=k=0,n=d.length;n>=0?n>k:k>n;h=n>=0?++k:--k)i[g++]=d[h]}else i=c?c:b;return a>0&&(i=this._getHeaderRow(--a,i)),i},a.prototype.getHeaderRowNestedLevel=function(){var a,b,c,d,e,f;for(a=this._columnModel,d=0,e=0,f=a.length;f>e;e++)b=a[e],c=this._getHeaderColumnNestedLevel(b),c>d&&(d=c);return d+1},a.prototype._getHeaderColumnNestedLevel=function(a){var b,c,d,e,f,g,h;if(e=0,a.hasOwnProperty("children")&&a.children.length>0){for(e++,c=0,h=a.children,f=0,g=h.length;g>f;f++)b=h[f],d=this._getHeaderColumnNestedLevel(b),d>c&&(c=d);e+=c}return e},a.prototype._getNumberOfNestedCells=function(a){var b,c,d,e,f;if(d=1,a.hasOwnProperty("children")&&a.children.length>0)for(b=a.children,d=b.length,e=0,f=b.length;f>e;e++)c=b[e],d=d+this._getNumberOfNestedCells(c)-1;return d},a.prototype._getStartingPosition=function(){var a;for(a=0;;){if(-1===this.filledPositions.indexOf(a))break;a++}return a},a.prototype._getNextIndexPosition=function(a){var b;for(b=a;;){if(-1===this.filledPositions.indexOf(b))break;b++}return b},a.prototype._validateHeaderColumns=function(){var a,b,c,d;for(a=this._columnModel,b=c=0,d=a.length;d>=0?d>c:c>d;b=d>=0?++c:--c)a[b]=this._validateHeaderColumnWidth(a[b]);return this._columnModel=a},a.prototype._validateHeaderColumnWidth=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(f=this.defaultHeaderColumnWidth,e=this._getHeaderColumnNestedLevel(a),e>0)for(d=e-1;;){for(g=this._getHeaderRow(d,null,a),h=j=0,l=g.length;l>=0?l>j:j>l;h=l>=0?++j:--j){if(c=0,g[h].hasOwnProperty("children")&&g[h].children.length>0){for(b=g[h].children,i=k=0,m=b.length;m>=0?m>k:k>m;i=m>=0?++k:--k)b[i].width=b[i].width?parseInt(b[i].width):f,c+=b[i].width;g[h].children=b}else c=g[h].width?parseInt(g[h].width):f;g[h].width=c}if(d--,0>=d)break}else a.width=a.width?parseInt(a.width):f;return a},a.prototype.getTableHeaderWidth=function(){var a,b,c,d,e,f,g,h,i;for(e=this.rnl,d=0,b=g=0;e>=0?e>g:g>e;b=e>=0?++g:--g)for(f=this._getHeaderRow(b),c=h=0,i=f.length;i>=0?i>h:h>i;c=i>=0?++h:--h)a=this._getHeaderColumnNestedLevel(f[c]),0===a&&(void 0===f[c].visible||f[c].visible)&&(d+=f[c].width+2);return d},a.prototype.getTableHeaderHeight=function(){return this.rnl*(this.cellHeight+2)},a.prototype.getLeafElements=function(){var a,b,c,d,e,f,g,h,i,j,k;for(f=this.rnl,c=1,this.filledPositions=[],d=i=0;f>=0?f>i:i>f;d=f>=0?++i:--i)for(g=this._getHeaderRow(d),h=this._getStartingPosition(),e=j=0,k=g.length;k>=0?k>j:j>k;e=k>=0?++j:--j)a=g[e],b=this._getHeaderColumnNestedLevel(a),0===b?(h=this._getNextIndexPosition(h),this.filledPositions.push(h),this._leafElements[h]=a):(c=this._getNumberOfNestedCells(a),h+=c-1),h++;return this._leafElements},a}(),TableGrid}(jQuery);var MY;MY={},MY.TextField=TextField,MY.ToolTip=ToolTip,MY.Autocompleter=Autocompleter,MY.ComboBox=ComboBox,MY.DatePicker=DatePicker,MY.Checkbox=Checkbox,MY.RadioButton=RadioButton,MY.TableGrid=TableGrid;